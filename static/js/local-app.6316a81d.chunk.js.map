{"version":3,"file":"static/js/local-app.6316a81d.chunk.js","mappings":"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","sources":["JsExtensionsLoader/LocalJsExtensionsFinder.js","JsExtensionsLoader/LocalJsExtensionsLoader.js","ResourcesList/LocalEmbeddedResourceSources.js","ResourcesList/LocalResourceSources.js","ResourcesList/LocalResourceExternalEditors.js","Utils/LocalUserInfo.js","ExportAndShare/LocalExporters/LocalFileSystem.js","ExportAndShare/LocalExporters/LocalPreviewLauncher/LocalNetworkPreviewDialog.js","ExportAndShare/LocalExporters/LocalPreviewLauncher/LocalPreviewDebuggerServer.js","ExportAndShare/LocalExporters/LocalPreviewLauncher/index.js","Utils/TimeFunction.js","ExportAndShare/LocalExporters/LocalCordovaExport.js","ExportAndShare/LocalExporters/LocalElectronExport.js","ExportAndShare/LocalExporters/LocalHTML5Export.js","UI/LocalFilePicker/index.js","Utils/OptionalLazyRequire.js","Utils/LocalArchiver.js","ExportAndShare/LocalExporters/LocalFacebookInstantGamesExport.js","ExportAndShare/LocalExporters/LocalFileUploader.js","ExportAndShare/LocalExporters/LocalOnlineCordovaExport.js","ExportAndShare/LocalExporters/LocalOnlineCordovaIosExport.js","ExportAndShare/LocalExporters/LocalOnlineElectronExport.js","ExportAndShare/LocalExporters/LocalOnlineWebExport.js","ExportAndShare/LocalExporters/index.js","MainFrame/ElectronMainMenu.js","EventsFunctionsExtensionsLoader/CodeWriters/LocalEventsFunctionCodeWriter.js","EventsFunctionsExtensionsLoader/Storage/LocalEventsFunctionsExtensionWriter.js","EventsFunctionsExtensionsLoader/Storage/LocalEventsFunctionsExtensionOpener.js","Utils/ObjectSplitter.js","ProjectsStorage/LocalFileStorageProvider/LocalProjectOpener.js","ProjectsStorage/LocalFileStorageProvider/LocalProjectWriter.js","UI/CustomSvgIcons/Computer.js","ProjectsStorage/LocalFileStorageProvider/LocalProjectResourcesHandler.js","ProjectsStorage/LocalFileStorageProvider/LocalFileResourcesWatcher.js","ProjectsStorage/LocalFileStorageProvider/index.js","GameEngineFinder/LocalGDJSDevelopmentWatcher.js","ProjectsStorage/LocalFileStorageProvider/LocalFileResourceMover.js","Utils/ProcessByChunk.js","Utils/LocalFileUploader.js","ProjectsStorage/ResourceMover/LocalResourceMover.js","ProjectsStorage/ResourceFetcher/LocalResourceFetcher.js","LoginProvider/LocalLoginProvider.js","LocalApp.js","../node_modules/lodash/_LazyWrapper.js","../node_modules/lodash/_LodashWrapper.js","../node_modules/lodash/_baseLodash.js","../node_modules/lodash/_baseSetData.js","../node_modules/lodash/_composeArgs.js","../node_modules/lodash/_composeArgsRight.js","../node_modules/lodash/_countHolders.js","../node_modules/lodash/_createBind.js","../node_modules/lodash/_createCtor.js","../node_modules/lodash/_createCurry.js","../node_modules/lodash/_createHybrid.js","../node_modules/lodash/_createPartial.js","../node_modules/lodash/_createRecurry.js","../node_modules/lodash/_createWrap.js","../node_modules/lodash/_getData.js","../node_modules/lodash/_getFuncName.js","../node_modules/lodash/_getHolder.js","../node_modules/lodash/_getWrapDetails.js","../node_modules/lodash/_insertWrapDetails.js","../node_modules/lodash/_isLaziable.js","../node_modules/lodash/_mergeData.js","../node_modules/lodash/_metaMap.js","../node_modules/lodash/_realNames.js","../node_modules/lodash/_reorder.js","../node_modules/lodash/_replaceHolders.js","../node_modules/lodash/_setData.js","../node_modules/lodash/_setWrapToString.js","../node_modules/lodash/_updateWrapDetails.js","../node_modules/lodash/_wrapperClone.js","../node_modules/lodash/partial.js","../node_modules/lodash/wrap.js","../node_modules/lodash/wrapperLodash.js"],"sourcesContent":["// Note: this file does not use export/imports nor Flow to allow its usage from Node.js\n\nconst { findGDJS } = require('../GameEngineFinder/LocalGDJSFinder');\nconst optionalRequire = require('../Utils/OptionalRequire');\nconst path = optionalRequire('path');\nconst fs = optionalRequire('fs');\n\nconst checkIfPathHasJsExtensionModule = extensionFolderPath => {\n  return new Promise(resolve => {\n    const jsExtensionModulePath = path.join(\n      extensionFolderPath,\n      'JsExtension.js'\n    );\n    fs.stat(jsExtensionModulePath, (err, stats) => {\n      if (err) {\n        return resolve(null);\n      }\n\n      return resolve(stats.isFile() ? jsExtensionModulePath : null);\n    });\n  });\n};\n\nconst findJsExtensionModules = ({ filterExamples, onFindGDJS }) => {\n  return (onFindGDJS ? onFindGDJS() : findGDJS()).then(({ gdjsRoot }) => {\n    const extensionsRoot = path.join(gdjsRoot, 'Runtime', 'Extensions');\n    console.info(\n      `Searching for JS extensions (file called JsExtension.js) in ${extensionsRoot}...`\n    );\n    return new Promise((resolve, reject) => {\n      fs.readdir(extensionsRoot, (error, extensionFolders) => {\n        if (error) {\n          return reject(error);\n        }\n\n        const filteredExtensionFolders = extensionFolders.filter(folder => {\n          if (!filterExamples) return true;\n\n          return folder.indexOf('Example') === -1;\n        });\n\n        Promise.all(\n          filteredExtensionFolders.map(extensionFolder =>\n            checkIfPathHasJsExtensionModule(\n              path.join(extensionsRoot, extensionFolder)\n            )\n          )\n        ).then(modulePaths => {\n          resolve(modulePaths.filter(modulePath => !!modulePath));\n        }, reject);\n      });\n    });\n  });\n};\n\nmodule.exports = {\n  findJsExtensionModules,\n};\n","// @flow\n// Note: this file does not use export/imports and use Flow comments to allow its usage from Node.js\n\nconst { loadExtension } = require('.');\nconst optionalRequire = require('../Utils/OptionalRequire');\nconst { findJsExtensionModules } = require('./LocalJsExtensionsFinder');\n\n/*flow-include\nimport type {JsExtensionsLoader, TranslationFunction} from '.';\nimport ObjectsEditorService from '../ObjectEditor/ObjectsEditorService';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\n\ntype MakeExtensionsLoaderArguments = {|\n  gd: any,\n  objectsEditorService: typeof ObjectsEditorService,\n  objectsRenderingService: typeof ObjectsRenderingService,\n  filterExamples: boolean,\n  onFindGDJS?: ?() => Promise<{gdjsRoot: string}>\n|};\n*/\n\n/**\n * Loader that will find all JS extensions declared in GDJS/Runtime/Extensions/xxx/JsExtension.js.\n * If you add a new extension and also want it to be available for the web-app version, add it in\n * BrowserJsExtensionsLoader.js\n */\nmodule.exports = function makeExtensionsLoader(\n  {\n    gd,\n    objectsEditorService,\n    objectsRenderingService,\n    filterExamples,\n    onFindGDJS,\n  } /*: MakeExtensionsLoaderArguments*/\n) /*: JsExtensionsLoader*/ {\n  return {\n    loadAllExtensions: (_ /*: TranslationFunction */) => {\n      return findJsExtensionModules({ filterExamples, onFindGDJS }).then(\n        extensionModulePaths => {\n          return Promise.all(\n            extensionModulePaths.map(extensionModulePath => {\n              let extensionModule = null;\n              try {\n                extensionModule = optionalRequire(extensionModulePath, {\n                  rethrowException: true,\n                });\n              } catch (ex) {\n                return {\n                  extensionModulePath,\n                  result: {\n                    message:\n                      'Unable to import extension. Please check for any syntax error or error that would prevent it from being run.',\n                    error: true,\n                    rawError: ex,\n                  },\n                };\n              }\n\n              if (!extensionModule) {\n                return {\n                  extensionModulePath,\n                  result: {\n                    error: true,\n                    message:\n                      'Unknown error. Please check for any syntax error or error that would prevent it from being run.',\n                  },\n                };\n              }\n\n              if (\n                objectsEditorService &&\n                extensionModule.registerEditorConfigurations\n              ) {\n                extensionModule.registerEditorConfigurations(\n                  objectsEditorService\n                );\n              }\n\n              if (objectsRenderingService) {\n                if (extensionModule.registerInstanceRenderers) {\n                  extensionModule.registerInstanceRenderers(\n                    objectsRenderingService\n                  );\n                }\n                if (extensionModule.registerClearCache) {\n                  extensionModule.registerClearCache(objectsRenderingService);\n                }\n              }\n\n              return {\n                extensionModulePath,\n                result: loadExtension(\n                  _,\n                  gd,\n                  gd.JsPlatform.get(),\n                  extensionModule\n                ),\n              };\n            })\n          );\n        },\n        err => {\n          console.error(`Unable to find JS extensions modules`);\n          throw err;\n        }\n      );\n    },\n  };\n};\n","// @flow\nimport optionalRequire from '../Utils/OptionalRequire';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { isPathInProjectFolder } from './ResourceUtils';\nimport { createNewResource } from './ResourceSource';\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\n\nexport type EmbeddedResource = {|\n  resourceKind: string,\n  resourceName?: string,\n\n  /** The \"path\" to the embedded resource (e.g: a tileset) as stored in the parent resource (e.g: a tilemap). */\n  relPath: string,\n\n  /** The full path to the file of the embedded resource. */\n  fullPath: string,\n\n  /** True if the embedded resource file is outside the project folder. */\n  isOutsideProjectFolder: boolean,\n|};\n\nexport type EmbeddedResources = {|\n  hasAnyEmbeddedResourceOutsideProjectFolder: boolean,\n  embeddedResources: Map<string, EmbeddedResource>,\n|};\n\nexport type MappedResources = {|\n  mapping: { [key: string]: string },\n|};\n\ntype ParseEmbeddedFiles = (\n  project: gdProject,\n  filePath: string\n) => Promise<?EmbeddedResources>;\n\n/**\n * Copy the embedded resources inside the project folder\n */\nexport async function copyAllEmbeddedResourcesToProjectFolder(\n  project: gdProject,\n  filesWithEmbeddedResources: Map<string, EmbeddedResources>\n) {\n  if (!fs || !path) {\n    return;\n  }\n\n  const projectPath = path.dirname(project.getProjectFile());\n  const copies = [];\n\n  for (const {\n    hasAnyEmbeddedResourceOutsideProjectFolder,\n    embeddedResources,\n  } of filesWithEmbeddedResources.values()) {\n    if (!hasAnyEmbeddedResourceOutsideProjectFolder) continue;\n\n    for (const embedded of embeddedResources.values()) {\n      if (!embedded.isOutsideProjectFolder) continue;\n\n      const resourceBasename = path.basename(embedded.fullPath);\n      const fileExtension = path.extname(resourceBasename);\n      const fileNameWithoutExtension = path.basename(\n        resourceBasename,\n        fileExtension\n      );\n\n      const newFileNameWithoutExtension = newNameGenerator(\n        fileNameWithoutExtension,\n        tentativeFileName => {\n          const tentativePath =\n            path.join(projectPath, tentativeFileName) + fileExtension;\n          return fs.existsSync(tentativePath);\n        }\n      );\n\n      const resourceNewPath = path.join(\n        projectPath,\n        newFileNameWithoutExtension + fileExtension\n      );\n\n      embedded.resourceName = newFileNameWithoutExtension + fileExtension;\n\n      copies.push(fs.promises.copyFile(embedded.fullPath, resourceNewPath));\n    }\n  }\n\n  return Promise.all(copies);\n}\n\n/**\n * Create the mapping between embedded resource path (e.g: path to a tileset) to its resource name (i.e: the name of\n * the resource containing the tileset).\n */\nexport function createAndMapEmbeddedResources(\n  project: gdProject,\n  filesWithEmbeddedResources: Map<string, EmbeddedResources>\n): Map<string, MappedResources> {\n  const projectPath = path.dirname(project.getProjectFile());\n\n  const filesWithMappedResources = new Map<string, MappedResources>();\n  for (const [filePath, { embeddedResources }] of filesWithEmbeddedResources) {\n    const mapping = {};\n    for (let {\n      resourceKind,\n      resourceName,\n      relPath,\n      fullPath,\n    } of embeddedResources.values()) {\n      if (!resourceName) {\n        resourceName = path.relative(projectPath, fullPath);\n      }\n\n      const theEmbeddedResource = createNewResource(resourceKind);\n      if (theEmbeddedResource) {\n        theEmbeddedResource.setName(resourceName);\n        theEmbeddedResource.setFile(resourceName);\n\n        mapping[relPath] = resourceName;\n\n        // embedded resources can have mappings too\n        if (filesWithMappedResources.has(fullPath)) {\n          const mappedResources = filesWithMappedResources.get(fullPath);\n\n          if (mappedResources && mappedResources.mapping) {\n            theEmbeddedResource.setMetadata(\n              JSON.stringify({\n                embeddedResourcesMapping: mappedResources.mapping,\n              })\n            );\n\n            filesWithMappedResources.delete(fullPath);\n          }\n        }\n\n        project.getResourcesManager().addResource(theEmbeddedResource);\n      }\n    }\n\n    filesWithMappedResources.set(filePath, {\n      mapping,\n    });\n  }\n\n  return filesWithMappedResources;\n}\n\n/**\n * List the embedded resources of a Tilemap (or JSON) resource.\n * Supports LDtk tilemaps.\n *\n * @param project The project\n * @param filePath The file path of a resource\n * @returns\n */\nexport async function listTileMapEmbeddedResources(\n  project: gdProject,\n  filePath: string\n): Promise<?EmbeddedResources> {\n  if (!fs || !path) {\n    return null;\n  }\n\n  const data = await fs.promises.readFile(filePath, 'utf8');\n  try {\n    const tileMap = JSON.parse(data);\n\n    // For LDtk tilemaps, read the tilesets.\n    if (tileMap && tileMap.__header__ && tileMap.__header__.app === 'LDtk') {\n      const dir = path.dirname(filePath);\n      const embeddedResources = new Map<string, EmbeddedResource>();\n      let hasAnyEmbeddedResourceOutsideProjectFolder = false;\n\n      for (const tileset of tileMap.defs.tilesets) {\n        if (tileset.relPath) {\n          const relPath = tileset.relPath;\n          const fullPath = path.resolve(dir, relPath);\n          const isOutsideProjectFolder = !isPathInProjectFolder(\n            project,\n            fullPath\n          );\n          const resource: EmbeddedResource = {\n            resourceKind: 'image',\n            relPath,\n            fullPath,\n            isOutsideProjectFolder,\n          };\n\n          embeddedResources.set(relPath, resource);\n\n          if (isOutsideProjectFolder)\n            hasAnyEmbeddedResourceOutsideProjectFolder = true;\n        }\n      }\n\n      for (const level of tileMap.levels) {\n        if (level.bgRelPath) {\n          const relPath = level.bgRelPath;\n          const fullPath = path.resolve(dir, relPath);\n          const isOutsideProjectFolder = !isPathInProjectFolder(\n            project,\n            fullPath\n          );\n          const resource: EmbeddedResource = {\n            resourceKind: 'image',\n            relPath,\n            fullPath,\n            isOutsideProjectFolder,\n          };\n\n          embeddedResources.set(level.bgRelPath, resource);\n\n          if (isOutsideProjectFolder)\n            hasAnyEmbeddedResourceOutsideProjectFolder = true;\n        }\n      }\n\n      return {\n        hasAnyEmbeddedResourceOutsideProjectFolder,\n        embeddedResources,\n      };\n    }\n  } catch (error) {\n    console.error(\n      `Unable to read properly the data from file ${filePath} for use as a tilemap - ignoring any potentially embedded resources.`\n    );\n    return null;\n  }\n}\n\nexport async function listSpineEmbeddedResources(\n  project: gdProject,\n  filePath: string\n): Promise<?EmbeddedResources> {\n  if (!fs || !path) return null;\n\n  const atlasPath = filePath.replace('.json', '.atlas');\n  const hasAtlasWithSameBasename = await new Promise<boolean>(resolve => {\n    fs.promises\n      .access(atlasPath, fs.constants.F_OK)\n      .then(() => resolve(true))\n      .catch(() => resolve(false));\n  });\n\n  // Spine resources usually have the same base names:\n  // e.g. skeleton.json, skeleton.atlas and skeleton.png.\n  if (!hasAtlasWithSameBasename) {\n    console.error(`Could not find an atlas file for Spine file ${filePath}.`);\n    return null;\n  }\n\n  const atlasFileName = path.basename(atlasPath);\n  const embeddedResources = new Map<string, EmbeddedResource>();\n  const isOutsideProjectFolder = !isPathInProjectFolder(project, atlasPath);\n  const resource: EmbeddedResource = {\n    resourceKind: 'atlas',\n    relPath: atlasFileName,\n    fullPath: atlasPath,\n    isOutsideProjectFolder,\n  };\n\n  embeddedResources.set(atlasFileName, resource);\n\n  return {\n    embeddedResources,\n    hasAnyEmbeddedResourceOutsideProjectFolder: isOutsideProjectFolder,\n  };\n}\n\nexport async function listSpineTextureAtlasEmbeddedResources(\n  project: gdProject,\n  filePath: string\n): Promise<?EmbeddedResources> {\n  if (!fs || !path) return null;\n\n  let atlasContent: ?string = null;\n  try {\n    atlasContent = await fs.promises.readFile(filePath, 'utf8');\n  } catch (error) {\n    console.error(\n      `Unable to read Spine Atlas file at path ${filePath}:`,\n      error\n    );\n  }\n\n  if (!atlasContent) return null;\n\n  const atlasImageRegex = /.*\\.(png|jpeg|jpg)$/gm;\n  const imageDependencies = atlasContent.match(atlasImageRegex);\n  if (!imageDependencies) return null;\n\n  const dir = path.dirname(filePath);\n  const embeddedResources = new Map<string, EmbeddedResource>();\n  let hasAnyEmbeddedResourceOutsideProjectFolder = false;\n\n  for (const relatedImagePath of imageDependencies) {\n    const fullPath = path.resolve(dir, relatedImagePath);\n    const isOutsideProjectFolder = !isPathInProjectFolder(project, fullPath);\n    const resource: EmbeddedResource = {\n      resourceKind: 'image',\n      relPath: relatedImagePath,\n      fullPath,\n      isOutsideProjectFolder,\n    };\n\n    embeddedResources.set(relatedImagePath, resource);\n\n    if (isOutsideProjectFolder)\n      hasAnyEmbeddedResourceOutsideProjectFolder = true;\n  }\n\n  return {\n    embeddedResources,\n    hasAnyEmbeddedResourceOutsideProjectFolder,\n  };\n}\n\nexport const embeddedResourcesParsers: { [string]: ParseEmbeddedFiles } = {\n  tilemap: listTileMapEmbeddedResources,\n  json: listTileMapEmbeddedResources,\n  spine: listSpineEmbeddedResources,\n  atlas: listSpineTextureAtlasEmbeddedResources,\n};\n","// @flow\nimport { t, Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport {\n  type ChooseResourceOptions,\n  type ChooseResourceProps,\n  type ResourceSourceComponentProps,\n  type ResourceSource,\n  allResourceKindsAndMetadata,\n} from './ResourceSource';\nimport { ResourceStore } from '../AssetStore/ResourceStore';\nimport { isPathInProjectFolder, copyAllToProjectFolder } from './ResourceUtils';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Window from '../Utils/Window';\nimport {\n  copyAllEmbeddedResourcesToProjectFolder,\n  embeddedResourcesParsers,\n  createAndMapEmbeddedResources,\n  type EmbeddedResources,\n  type MappedResources,\n} from './LocalEmbeddedResourceSources';\nimport { Line } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\nimport { FileToCloudProjectResourceUploader } from './FileToCloudProjectResourceUploader';\n\nconst remote = optionalRequire('@electron/remote');\nconst dialog = remote ? remote.dialog : null;\nconst path = optionalRequire('path');\n\ntype ResourceStoreChooserProps = {\n  options: ChooseResourceOptions,\n  onChooseResources: (resources: Array<gdResource>) => void,\n  createNewResource: () => gdResource,\n};\n\nconst ResourceStoreChooser = ({\n  options,\n  onChooseResources,\n  createNewResource,\n}: ResourceStoreChooserProps) => {\n  return (\n    <ResourceStore\n      onChoose={resource => {\n        const chosenResourceUrl = resource.url;\n        const newResource = createNewResource();\n        newResource.setFile(chosenResourceUrl);\n        newResource.setName(path.basename(chosenResourceUrl));\n        newResource.setOrigin('gdevelop-asset-store', chosenResourceUrl);\n\n        onChooseResources([newResource]);\n      }}\n      resourceKind={options.resourceKind}\n    />\n  );\n};\n\nconst localResourceSources: Array<ResourceSource> = [\n  // Have the local resource sources first, so they are used by default/shown first when\n  // the project is saved locally.\n  ...allResourceKindsAndMetadata.map(\n    ({ kind, displayName, fileExtensions, createNewResource }) => {\n      const selectLocalFileResources = async ({\n        i18n,\n        getLastUsedPath,\n        setLastUsedPath,\n        project,\n        options,\n        resourcesImporationBehavior,\n      }: ChooseResourceProps) => {\n        if (!dialog)\n          throw new Error('Electron dialog not supported in this environment.');\n\n        const properties = ['openFile'];\n        if (options.multiSelection) properties.push('multiSelections');\n\n        const projectPath = path.dirname(project.getProjectFile());\n        const latestPath = getLastUsedPath(project, kind) || projectPath;\n\n        const browserWindow = remote.getCurrentWindow();\n        let { filePaths } = await dialog.showOpenDialog(browserWindow, {\n          title: i18n._(t`Choose a file`),\n          properties,\n          filters: [\n            { name: i18n._(t`Supported files`), extensions: fileExtensions },\n          ],\n          defaultPath: latestPath,\n        });\n        if (!filePaths || !filePaths.length) return [];\n\n        const lastUsedPath = path.parse(filePaths[0]).dir;\n        setLastUsedPath(project, kind, lastUsedPath);\n\n        let hasFilesOutsideProjectFolder = filePaths.some(\n          path => !isPathInProjectFolder(project, path)\n        );\n\n        // Some resources, like tilemaps, can have references to other files.\n        // We parse these files, optionally copy them, then create a mapping from the previous file name\n        // as written inside the tilemap to the name of the resource that is representing this file.\n        const filesWithEmbeddedResources = new Map<string, EmbeddedResources>();\n        const parseEmbeddedResources = embeddedResourcesParsers[kind];\n        const recursivelyParseEmbeddedResources = async (\n          initialEmbeddedResources: EmbeddedResources\n        ) => {\n          for (const initialEmbeddedResource of initialEmbeddedResources.embeddedResources.values()) {\n            const embeddedResourseParser =\n              embeddedResourcesParsers[initialEmbeddedResource.resourceKind];\n\n            if (!embeddedResourseParser) continue;\n\n            const { fullPath } = initialEmbeddedResource;\n            const newDependentResources = await embeddedResourseParser(\n              project,\n              fullPath\n            );\n\n            if (newDependentResources) {\n              filesWithEmbeddedResources.set(fullPath, newDependentResources);\n\n              await recursivelyParseEmbeddedResources(newDependentResources);\n            }\n          }\n        };\n        if (parseEmbeddedResources) {\n          for (const filePath of filePaths) {\n            const embeddedResources = await parseEmbeddedResources(\n              project,\n              filePath\n            );\n\n            if (embeddedResources) {\n              await recursivelyParseEmbeddedResources(embeddedResources);\n\n              filesWithEmbeddedResources.set(filePath, embeddedResources);\n\n              if (embeddedResources.hasAnyEmbeddedResourceOutsideProjectFolder)\n                hasFilesOutsideProjectFolder = true;\n            }\n          }\n        }\n\n        // Check if files should be copied in the project folder.\n        const newToOldFilePaths = new Map<string, string>();\n        let filesWithMappedResources = new Map<string, MappedResources>();\n        if (hasFilesOutsideProjectFolder) {\n          let answer: boolean;\n\n          if (resourcesImporationBehavior === 'relative') {\n            answer = false;\n          } else if (resourcesImporationBehavior === 'import') {\n            answer = true;\n          } else {\n            answer = Window.showConfirmDialog(\n              i18n._(\n                t`This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?`\n              )\n            );\n          }\n\n          if (answer) {\n            filePaths = await copyAllToProjectFolder(\n              project,\n              filePaths,\n              newToOldFilePaths\n            );\n\n            await copyAllEmbeddedResourcesToProjectFolder(\n              project,\n              filesWithEmbeddedResources\n            );\n          }\n        }\n\n        // In case of resources embedded inside others,\n        // create a mapping from the file name\n        // as written inside the resource (e.g: the tilemap)\n        // to the name of the resource that was created to\n        // represent this file.\n        filesWithMappedResources = createAndMapEmbeddedResources(\n          project,\n          filesWithEmbeddedResources\n        );\n\n        return filePaths.map(filePath => {\n          const newResource = createNewResource();\n          newResource.setFile(path.relative(projectPath, filePath));\n          newResource.setName(path.relative(projectPath, filePath));\n\n          const filePathWithMapping = newToOldFilePaths.has(filePath)\n            ? newToOldFilePaths.get(filePath)\n            : filePath;\n          if (filePathWithMapping) {\n            const mappedResources = filesWithMappedResources.get(\n              filePathWithMapping\n            );\n\n            if (mappedResources && mappedResources.mapping) {\n              newResource.setMetadata(\n                JSON.stringify({\n                  embeddedResourcesMapping: mappedResources.mapping,\n                })\n              );\n            }\n          }\n\n          return newResource;\n        });\n      };\n\n      return {\n        name: 'local-file-opener-' + kind,\n        displayName: t`Choose a file`,\n        displayTab: 'import',\n        onlyForStorageProvider: 'LocalFile',\n        kind,\n        selectResourcesHeadless: selectLocalFileResources,\n        renderComponent: (props: ResourceSourceComponentProps) => (\n          <Line justifyContent=\"center\">\n            <RaisedButton\n              primary\n              label={\n                props.options.multiSelection ? (\n                  <Trans>Choose one or more files</Trans>\n                ) : (\n                  <Trans>Choose a file</Trans>\n                )\n              }\n              onClick={async () => {\n                const resources = await selectLocalFileResources({\n                  i18n: props.i18n,\n                  project: props.project,\n                  fileMetadata: props.fileMetadata,\n                  getStorageProvider: props.getStorageProvider,\n                  getLastUsedPath: props.getLastUsedPath,\n                  setLastUsedPath: props.setLastUsedPath,\n                  options: props.options,\n                  resourcesImporationBehavior:\n                    props.resourcesImporationBehavior,\n                });\n\n                props.onChooseResources(resources);\n              }}\n            />\n          </Line>\n        ),\n      };\n    }\n  ),\n  ...allResourceKindsAndMetadata.map(({ kind, createNewResource }) => ({\n    name: `upload-${kind}`,\n    displayName: t`File(s) from your device`,\n    displayTab: 'import',\n    onlyForStorageProvider: 'Cloud',\n    kind,\n    renderComponent: (props: ResourceSourceComponentProps) => (\n      <FileToCloudProjectResourceUploader\n        createNewResource={createNewResource}\n        onChooseResources={props.onChooseResources}\n        options={props.options}\n        fileMetadata={props.fileMetadata}\n        getStorageProvider={props.getStorageProvider}\n        key={`url-chooser-${kind}`}\n        automaticallyOpenInput={!!props.automaticallyOpenIfPossible}\n      />\n    ),\n  })),\n  ...allResourceKindsAndMetadata.map(({ kind, createNewResource }) => ({\n    name: `resource-store-${kind}`,\n    displayName: t`Choose from asset store`,\n    displayTab: 'standalone',\n    kind,\n    renderComponent: (props: ResourceSourceComponentProps) => (\n      <ResourceStoreChooser\n        createNewResource={createNewResource}\n        onChooseResources={props.onChooseResources}\n        options={props.options}\n        key={`resource-store-${kind}`}\n      />\n    ),\n  })),\n];\n\nexport default localResourceSources;\n","// @flow\nimport {\n  type ResourceExternalEditor,\n  type ExternalEditorInput,\n  type ExternalEditorOutput,\n  type ExternalEditorBase64Resource,\n  type EditWithExternalEditorOptions,\n  readMetadata,\n  saveBlobUrlsFromExternalEditorBase64Resources,\n  freeBlobsAndUpdateMetadata,\n  patchExternalEditorMetadataWithResourcesNamesIfNecessary,\n} from './ResourceExternalEditor';\nimport { sendExternalEditorOpened } from '../Utils/Analytics/EventSender';\nimport { t } from '@lingui/macro';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport { isBlobURL, isURL } from './ResourceUtils';\nimport {\n  convertBlobToDataURL,\n  downloadUrlsToBlobs,\n  type ItemResult,\n} from '../Utils/BlobDownloader';\nimport { type ResourceKind } from './ResourceSource';\n\nconst path = optionalRequire('path');\nconst fs = optionalRequire('fs');\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\n/**\n * Ask Electron main process to open a window for the specified editor,\n * then wait for the editor to be closed and pass the results.\n */\nconst openAndWaitForExternalEditorWindow = async (\n  editorName: 'piskel' | 'yarn' | 'jfxr',\n  externalEditorInput: ExternalEditorInput\n): Promise<?ExternalEditorOutput> => {\n  if (!ipcRenderer) throw new Error('Not supported.');\n\n  const externalEditorOutput = await ipcRenderer.invoke(\n    `${editorName}-load`,\n    externalEditorInput\n  );\n  return externalEditorOutput;\n};\n\n/**\n * Download (or read locally) resources and prepare them to be edited\n * by an external editor.\n */\nexport const downloadAndPrepareExternalEditorBase64Resources = async ({\n  project,\n  resourceNames,\n}: {|\n  project: gdProject,\n  resourceNames: Array<string>,\n|}): Promise<Array<ExternalEditorBase64Resource>> => {\n  type ResourceToDownload = {|\n    resourceName: string,\n    url: string,\n  |};\n\n  type ResourceToReadLocally = {|\n    resourceName: string,\n    localFilePath: string,\n  |};\n\n  const projectPath = path.dirname(project.getProjectFile());\n  const urlsToDownload: Array<ResourceToDownload> = [];\n  const filesToRead: Array<ResourceToReadLocally> = [];\n  const resourcesManager = project.getResourcesManager();\n  resourceNames.forEach(resourceName => {\n    if (!resourcesManager.hasResource(resourceName)) return;\n\n    const resource = resourcesManager.getResource(resourceName);\n    const url = resource.getFile();\n    if (isURL(url)) {\n      if (isBlobURL(url)) {\n        console.error('Unsupported blob URL for a resource - ignoring it.');\n      } else {\n        urlsToDownload.push({\n          url,\n          resourceName,\n        });\n      }\n    } else {\n      // This resource is a local file.\n      filesToRead.push({\n        localFilePath: url,\n        resourceName,\n      });\n    }\n  });\n\n  const downloadedBlobs: Array<\n    ItemResult<ResourceToDownload>\n  > = await downloadUrlsToBlobs({\n    urlContainers: urlsToDownload,\n    onProgress: (count, total) => {},\n  });\n\n  const resourcesToDataUrl = new Map<\n    string,\n    {|\n      dataUrl: string,\n      localFilePath?: string,\n    |}\n  >();\n  await Promise.all(\n    downloadedBlobs.map(async ({ error, blob, item }) => {\n      if (blob) {\n        try {\n          resourcesToDataUrl.set(item.resourceName, {\n            dataUrl: await convertBlobToDataURL(blob),\n          });\n        } catch (error) {\n          console.error(\n            `Unable to read data from resource \"${\n              item.resourceName\n            }\" - ignoring it.`,\n            error\n          );\n        }\n      }\n    })\n  );\n  await Promise.all(\n    filesToRead.map(async ({ localFilePath, resourceName }) => {\n      try {\n        const content = await fs.promises.readFile(\n          path.resolve(projectPath, localFilePath)\n        );\n\n        resourcesToDataUrl.set(resourceName, {\n          localFilePath,\n          dataUrl: 'data:text/plain;base64,' + content.toString('base64'),\n        });\n      } catch (error) {\n        console.error(\n          `Unable to read local file \"${localFilePath}\" - ignoring it.`,\n          error\n        );\n      }\n    })\n  );\n\n  return resourceNames.map(resourceName => {\n    const resourceData = resourcesToDataUrl.get(resourceName);\n    if (!resourceData)\n      return {\n        name: resourceName,\n        dataUrl: '',\n      };\n\n    const { localFilePath, dataUrl } = resourceData;\n    return {\n      name: resourceName,\n      dataUrl,\n      localFilePath,\n    };\n  });\n};\n\n/**\n * Edit one or more resources with the specified external editor.\n */\nconst editWithLocalExternalEditor = async ({\n  externalEditorName,\n  defaultName,\n  metadataKey,\n  resourceKind,\n  options,\n}: {|\n  externalEditorName: 'piskel' | 'yarn' | 'jfxr',\n  defaultName: string,\n  metadataKey: string,\n  resourceKind: ResourceKind,\n  options: EditWithExternalEditorOptions,\n|}) => {\n  const { project, resourceNames, resourceManagementProps } = options;\n\n  // Fetch all edited resources as base64 encoded \"data urls\" (`data:...`).\n  const resources = await downloadAndPrepareExternalEditorBase64Resources({\n    project,\n    resourceNames,\n  });\n\n  // Open the external editor, passing the resources with the data urls.\n  const externalEditorInput: ExternalEditorInput = {\n    singleFrame: options.extraOptions.singleFrame,\n    externalEditorData: readMetadata(\n      metadataKey,\n      options.extraOptions.existingMetadata\n    ),\n    fps: options.extraOptions.fps,\n    isLooping: options.extraOptions.isLooping,\n    name: options.extraOptions.name || resourceNames[0] || defaultName,\n    resources,\n  };\n  sendExternalEditorOpened(externalEditorName);\n  const externalEditorOutput: ?ExternalEditorOutput = await openAndWaitForExternalEditorWindow(\n    externalEditorName,\n    externalEditorInput\n  );\n  if (!externalEditorOutput) return null; // Changes cancelled.\n\n  // Save the edited files back to the GDevelop resources, as \"blob urls\" (blob:...)\n  // which can then uploaded or saved locally.\n  const modifiedResources = await saveBlobUrlsFromExternalEditorBase64Resources(\n    {\n      baseNameForNewResources: externalEditorOutput.baseNameForNewResources,\n      project,\n      resources: externalEditorOutput.resources,\n      resourceKind,\n    }\n  );\n\n  // Ask the project to persist the resources (\"blob urls\" will be either uploaded\n  // or saved locally).\n  try {\n    await resourceManagementProps.onFetchNewlyAddedResources();\n  } catch (error) {\n    console.error(\n      'An error happened while fetching the newly added resources:',\n      error\n    );\n  }\n\n  // Free the \"blob urls\" so that blobs don't stay in memory! They are only temporarily\n  // useful while waiting for an upload/local file save.\n  freeBlobsAndUpdateMetadata({\n    modifiedResources,\n    metadataKey,\n    metadata: options.extraOptions.singleFrame\n      ? externalEditorOutput.externalEditorData\n      : null,\n  });\n\n  // Some editors (Piskel) need to have resource names persisted.\n  patchExternalEditorMetadataWithResourcesNamesIfNecessary(\n    modifiedResources.map(({ resource }) => resource.getName()),\n    externalEditorOutput.externalEditorData\n  );\n\n  return {\n    resources: modifiedResources.map(({ resource, originalIndex }) => ({\n      name: resource.getName(),\n      originalIndex,\n    })),\n    newName: externalEditorOutput.baseNameForNewResources,\n    newMetadata: { [metadataKey]: externalEditorOutput.externalEditorData },\n  };\n};\n\n/**\n * This is the list of editors that can be used to edit resources\n * on Electron runtime.\n */\nconst editors: Array<ResourceExternalEditor> = [\n  {\n    name: 'piskel-app',\n    createDisplayName: t`Create with Piskel`,\n    editDisplayName: t`Edit with Piskel`,\n    kind: 'image',\n    edit: async options => {\n      return await editWithLocalExternalEditor({\n        options,\n        externalEditorName: 'piskel',\n        defaultName: 'New image',\n        metadataKey: 'pskl',\n        resourceKind: 'image',\n      });\n    },\n  },\n  {\n    name: 'Jfxr',\n    createDisplayName: t`Create with Jfxr`,\n    editDisplayName: t`Edit with Jfxr`,\n    kind: 'audio',\n    edit: async options => {\n      return await editWithLocalExternalEditor({\n        options,\n        externalEditorName: 'jfxr',\n        defaultName: 'New sound effect',\n        metadataKey: 'jfxr',\n        resourceKind: 'audio',\n      });\n    },\n  },\n  {\n    name: 'Yarn',\n    createDisplayName: t`Create with Yarn`,\n    editDisplayName: t`Edit with Yarn`,\n    kind: 'json',\n    edit: async options => {\n      return await editWithLocalExternalEditor({\n        options,\n        externalEditorName: 'yarn',\n        defaultName: 'New dialogue tree',\n        metadataKey: 'yarn',\n        resourceKind: 'json',\n      });\n    },\n  },\n];\n\nexport default editors;\n","// @flow\nimport optionalRequire from './OptionalRequire';\nconst os = optionalRequire('os');\n\nexport const getUID = () => {\n  try {\n    return os.userInfo().uid;\n  } catch (e) {\n    return '';\n  }\n};\n","// @flow\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { getUID } from '../../Utils/LocalUserInfo';\nimport { isURL } from '../../ResourcesList/ResourceUtils';\nconst fs = optionalRequire('fs-extra');\nconst path = optionalRequire('path');\nconst os = optionalRequire('os');\n\nconst gd: libGDevelop = global.gd;\n\nexport type UrlFileDescriptor = {|\n  filePath: string,\n  url: string,\n|};\n\n// For some reason, `path.posix` is undefined when packaged\n// with webpack, so we're using `path` directly. As it's for the web-app,\n// it should always be the posix version. In tests on Windows,\n// it's necessary to use path.posix.\n// Search for \"pathPosix\" in the codebase for other places where this is used.\nconst pathPosix = path.posix || path;\n\n/**\n * Gives access to the local filesystem, but returns paths\n * that are using \"/\" as a path separator, even on Windows\n * (so that in exported games, paths are slashs, which is\n * supported everywhere).\n */\nclass LocalFileSystem {\n  /**\n   * True if URLs should be downloaded (useful for an export, but not for a preview).\n   * @private\n   */\n  _downloadUrlsToLocalFiles: boolean;\n\n  /**\n   * Store all the files that should be downloaded (filepath => url)\n   * @private\n   */\n  _filesToDownload: { [string]: string } = {};\n\n  constructor(\n    options: ?{|\n      downloadUrlsToLocalFiles: boolean,\n    |}\n  ) {\n    this._downloadUrlsToLocalFiles =\n      !!options && options.downloadUrlsToLocalFiles;\n  }\n\n  /**\n   * Returns all the files that should be downloaded from a URL, with the specified destination path prefix.\n   */\n  getAllUrlFilesIn = (pathPrefix: string): Array<UrlFileDescriptor> => {\n    // Ensure the path prefix we're searching the files in is normalized,\n    // because everything that we stored was normalized. If we don't do this,\n    // we risk missing files on Windows (as pathPrefix can contain backslashes).\n    const normalizedPathPrefix = pathPosix\n      .normalize(pathPrefix)\n      .replace(/\\\\/g, '/');\n\n    return Object.keys(this._filesToDownload)\n      .filter(filePath => filePath.indexOf(normalizedPathPrefix) === 0)\n      .map(filePath => ({\n        filePath,\n        url: this._filesToDownload[filePath],\n      }));\n  };\n\n  mkDir = (path: string) => {\n    if (isURL(path)) {\n      // URLs are always assumed to exist.\n      return;\n    }\n\n    try {\n      fs.mkdirsSync(path);\n    } catch (e) {\n      console.error('mkDir(' + path + ') failed: ' + e);\n      return false;\n    }\n    return true;\n  };\n  dirExists = (path: string) => {\n    if (isURL(path)) {\n      // URLs are always assumed to exist.\n      return true;\n    }\n\n    return fs.existsSync(path);\n  };\n  clearDir = (path: string) => {\n    try {\n      fs.emptyDirSync(path);\n    } catch (e) {\n      console.error('clearDir(' + path + ') failed: ' + e);\n    }\n  };\n  getTempDir = () => {\n    return path.join(os.tmpdir(), `GDTMP-${getUID()}`);\n  };\n  fileNameFrom = (fullPath: string) => {\n    // If URLs are not downloaded, then filenames are not changed.\n    if (!this._downloadUrlsToLocalFiles && isURL(fullPath)) return fullPath;\n\n    return path.basename(fullPath);\n  };\n  dirNameFrom = (fullPath: string) => {\n    return path.dirname(fullPath).replace(/\\\\/g, '/');\n  };\n  makeAbsolute = (filename: string, baseDirectory: string) => {\n    if (isURL(filename)) return filename;\n\n    if (!this.isAbsolute(baseDirectory))\n      baseDirectory = path.resolve(baseDirectory);\n\n    return path\n      .resolve(baseDirectory, path.normalize(filename))\n      .replace(/\\\\/g, '/');\n  };\n  makeRelative = (filename: string, baseDirectory: string) => {\n    if (isURL(filename)) return filename;\n\n    return path\n      .relative(baseDirectory, path.normalize(filename))\n      .replace(/\\\\/g, '/');\n  };\n  isAbsolute = (fullPath: string) => {\n    if (isURL(fullPath)) return true;\n\n    if (fullPath.length === 0) return true;\n    return (\n      (fullPath.length > 0 && fullPath.charAt(0) === '/') ||\n      (fullPath.length > 1 && fullPath.charAt(1) === ':')\n    );\n  };\n  copyFile = (source: string, dest: string) => {\n    if (isURL(source)) {\n      // If URLs are not downloaded, then there is nothing to copy.\n      if (!this._downloadUrlsToLocalFiles) return true;\n\n      if (isURL(dest)) {\n        console.error(\n          `Destination can't be a URL in copyFile (from ${source} to ${dest}).`\n        );\n        return false;\n      }\n\n      this._filesToDownload[pathPosix.normalize(dest)] = source;\n      return true;\n    }\n\n    try {\n      if (source !== dest) fs.copySync(source, dest);\n    } catch (e) {\n      console.error('copyFile(' + source + ', ' + dest + ') failed: ' + e);\n      return false;\n    }\n    return true;\n  };\n  writeToFile = (file: string, contents: string) => {\n    try {\n      fs.outputFileSync(file, contents);\n    } catch (e) {\n      console.error('writeToFile(' + file + ', ...) failed: ' + e);\n      return false;\n    }\n    return true;\n  };\n  readFile = (file: string) => {\n    try {\n      var contents = fs.readFileSync(file);\n      return contents.toString();\n    } catch (e) {\n      console.error('readFile(' + file + ') failed: ' + e);\n      return '';\n    }\n  };\n  readDir = (path: string, ext: string) => {\n    ext = ext.toUpperCase();\n    var output = new gd.VectorString();\n    try {\n      var files = [];\n      if (fs.existsSync(path)) {\n        files = fs.readdirSync(path);\n        files.forEach(function(file) {\n          if (\n            ext.length === 0 ||\n            file.toUpperCase().indexOf(ext, file.length - ext.length) !== -1\n          ) {\n            output.push_back(path + '/' + file);\n          }\n        });\n      }\n    } catch (e) {\n      console.error('readDir(' + path + ',' + ext + ') failed: ' + e);\n    }\n\n    return output;\n  };\n  fileExists = (filePath: string) => {\n    // Check if a file WILL exists once downloaded.\n    const normalizedFilePath = pathPosix.normalize(filePath);\n    const shouldTheFileBeDownloaded = !!this._filesToDownload[\n      normalizedFilePath\n    ];\n    if (shouldTheFileBeDownloaded) {\n      return true;\n    }\n\n    // Check if a local file exists.\n    try {\n      const stat = fs.statSync(filePath);\n      return stat.isFile();\n    } catch (e) {\n      return false;\n    }\n  };\n}\n\nexport default LocalFileSystem;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../../UI/Dialog';\nimport FlatButton from '../../../UI/FlatButton';\nimport Text from '../../../UI/Text';\nimport { Line } from '../../../UI/Grid';\nimport PlaceholderLoader from '../../../UI/PlaceholderLoader';\nimport ShareLink from '../../../UI/ShareDialog/ShareLink';\nimport QrCode from '../../../UI/QrCode';\nimport { useResponsiveWindowSize } from '../../../UI/Responsive/ResponsiveWindowMeasurer';\n\ntype Props = {|\n  open: boolean,\n  /**\n   * url without protocol, for example '192.168.1.16:2929'\n   */\n  url: ?string,\n  onClose: () => void,\n  onExport: ?() => void,\n  onRunPreviewLocally: () => void,\n  error: ?any,\n|};\n\nconst LocalNetworkPreviewDialog = ({\n  url,\n  open,\n  error,\n  onExport,\n  onClose,\n  onRunPreviewLocally,\n}: Props) => {\n  const { isMobile } = useResponsiveWindowSize();\n  if (!open) return null;\n  const urlWithProtocol = url ? `http://${url}` : '';\n\n  return (\n    <Dialog\n      title={<Trans>Preview</Trans>}\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary\n          onClick={onClose}\n        />,\n      ]}\n      secondaryActions={[\n        onExport && (\n          <FlatButton\n            key=\"export\"\n            label={<Trans>Export game</Trans>}\n            onClick={onExport}\n          />\n        ),\n        <FlatButton\n          key=\"run-preview-locally\"\n          label={<Trans>Run on this computer</Trans>}\n          onClick={onRunPreviewLocally}\n        />,\n      ]}\n      open={open}\n      onRequestClose={onClose}\n      maxWidth=\"sm\"\n    >\n      {error && (\n        <Line>\n          <Text>\n            <Trans>\n              Unable to start the server for the preview! Make sure that you are\n              authorized to run servers on this computer. Otherwise, use classic\n              preview to test your game.\n            </Trans>\n          </Text>\n        </Line>\n      )}\n      {!error && !url && <PlaceholderLoader />}\n      {!error && url && (\n        <div>\n          <Line>\n            <Text>\n              <Trans>\n                Your preview is ready! On your mobile or tablet, open your\n                browser and enter in the address bar:\n              </Trans>\n            </Text>\n          </Line>\n          <ShareLink url={url} />\n          {urlWithProtocol && (\n            <>\n              <Line>\n                <Text>\n                  <Trans>Or flash this QR code:</Trans>\n                </Text>\n              </Line>\n              <Line justifyContent=\"center\">\n                <QrCode url={urlWithProtocol} size={isMobile ? 100 : 150} />\n              </Line>\n            </>\n          )}\n          <Line>\n            <Text>\n              <Trans>\n                Please note that your device should be connected on the same\n                network as this computer.\n              </Trans>\n            </Text>\n          </Line>\n        </div>\n      )}\n    </Dialog>\n  );\n};\n\nexport default LocalNetworkPreviewDialog;\n","// @flow\nimport optionalRequire from '../../../Utils/OptionalRequire';\nimport {\n  type PreviewDebuggerServerCallbacks,\n  type PreviewDebuggerServer,\n  type DebuggerId,\n  type ServerAddress,\n} from '../../PreviewLauncher.flow';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\nlet debuggerServerState: 'started' | 'stopped' = 'stopped';\nlet debuggerServerAddress: ?ServerAddress = null;\nconst callbacksList: Array<PreviewDebuggerServerCallbacks> = [];\nconst debuggerIds: Array<DebuggerId> = [];\n\nconst removeServerListeners = () => {\n  if (!ipcRenderer) return;\n\n  ipcRenderer.removeAllListeners('debugger-send-message-done');\n  ipcRenderer.removeAllListeners('debugger-error-received');\n  ipcRenderer.removeAllListeners('debugger-connection-closed');\n  ipcRenderer.removeAllListeners('debugger-connection-opened');\n  ipcRenderer.removeAllListeners('debugger-connection-errored');\n  ipcRenderer.removeAllListeners('debugger-start-server-done');\n  ipcRenderer.removeAllListeners('debugger-message-received');\n};\n\n/**\n * A debugger server implemented using Electron (this one is just a bridge to it,\n * communicating through events with it).\n */\nexport const localPreviewDebuggerServer: PreviewDebuggerServer = {\n  startServer: () => {\n    if (!ipcRenderer) return Promise.reject();\n    if (debuggerServerState === 'started') return Promise.resolve();\n\n    const serverStartPromise = new Promise((resolve, reject) => {\n      let serverStartPromiseCompleted = false;\n      debuggerServerState = 'stopped';\n      debuggerServerAddress = null;\n      removeServerListeners();\n\n      ipcRenderer.on('debugger-error-received', (event, err) => {\n        if (!serverStartPromiseCompleted) {\n          reject(err);\n          serverStartPromiseCompleted = true;\n        }\n\n        callbacksList.forEach(({ onErrorReceived }) => onErrorReceived(err));\n      });\n\n      ipcRenderer.on('debugger-connection-closed', (event, { id }) => {\n        const debuggerIdIndex = debuggerIds.indexOf(id);\n        if (debuggerIdIndex !== -1) debuggerIds.splice(debuggerIdIndex, 1);\n\n        callbacksList.forEach(({ onConnectionClosed }) =>\n          onConnectionClosed({\n            id,\n            debuggerIds,\n          })\n        );\n      });\n\n      ipcRenderer.on('debugger-connection-opened', (event, { id }) => {\n        debuggerIds.push(id);\n        callbacksList.forEach(({ onConnectionOpened }) =>\n          onConnectionOpened({\n            id,\n            debuggerIds,\n          })\n        );\n      });\n\n      ipcRenderer.on(\n        'debugger-connection-errored',\n        (event, { id, errorMessage }) => {\n          callbacksList.forEach(({ onConnectionErrored }) =>\n            onConnectionErrored({\n              id,\n              errorMessage,\n            })\n          );\n        }\n      );\n\n      ipcRenderer.on('debugger-start-server-done', (event, { address }) => {\n        console.info('Local preview debugger started');\n        debuggerServerState = 'started';\n        debuggerServerAddress = address;\n        if (!serverStartPromiseCompleted) {\n          resolve();\n          serverStartPromiseCompleted = true;\n        }\n\n        callbacksList.forEach(({ onServerStateChanged }) =>\n          onServerStateChanged()\n        );\n      });\n\n      ipcRenderer.on('debugger-message-received', (event, { id, message }) => {\n        console.info('Processing message received for debugger');\n        try {\n          const parsedMessage = JSON.parse(message);\n          callbacksList.forEach(({ onHandleParsedMessage }) =>\n            onHandleParsedMessage({ id, parsedMessage })\n          );\n        } catch (e) {\n          console.warn(\n            'Error while parsing message received from debugger client:',\n            e\n          );\n        }\n      });\n      ipcRenderer.send('debugger-start-server');\n    });\n\n    // Consider the start of the server as a failure if not completed/errored\n    // after 5s.\n    const serverStartTimeoutPromise = new Promise((resolve, reject) => {\n      setTimeout(() => {\n        reject(\n          new Error(\n            'Debugger server not started or errored after 5s - aborting.'\n          )\n        );\n      }, 5000);\n    });\n    return Promise.race([serverStartPromise, serverStartTimeoutPromise]);\n  },\n  sendMessage: (id: DebuggerId, message: Object) => {\n    if (!ipcRenderer) return;\n    if (debuggerServerState === 'stopped') {\n      console.error('Cannot send message when debugger server is stopped.');\n      return;\n    }\n\n    ipcRenderer.send('debugger-send-message', {\n      id,\n      message: JSON.stringify(message),\n    });\n  },\n  getServerState: () => debuggerServerState,\n  getExistingDebuggerIds: () => debuggerIds,\n  registerCallbacks: (callbacks: PreviewDebuggerServerCallbacks) => {\n    callbacksList.push(callbacks);\n\n    return () => {\n      const callbacksIndex = callbacksList.indexOf(callbacks);\n      if (callbacksIndex !== -1) callbacksList.splice(callbacksIndex, 1);\n    };\n  },\n};\n\nexport const getDebuggerServerAddress = (): ?ServerAddress =>\n  debuggerServerAddress;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport LocalFileSystem from '../LocalFileSystem';\nimport optionalRequire from '../../../Utils/OptionalRequire';\nimport { timeFunction } from '../../../Utils/TimeFunction';\nimport { findGDJS } from '../../../GameEngineFinder/LocalGDJSFinder';\nimport LocalNetworkPreviewDialog from './LocalNetworkPreviewDialog';\nimport assignIn from 'lodash/assignIn';\nimport { type PreviewOptions } from '../../PreviewLauncher.flow';\nimport SubscriptionChecker, {\n  type SubscriptionCheckerInterface,\n} from '../../../Profile/Subscription/SubscriptionChecker';\nimport {\n  getDebuggerServerAddress,\n  localPreviewDebuggerServer,\n} from './LocalPreviewDebuggerServer';\nimport Window from '../../../Utils/Window';\nconst electron = optionalRequire('electron');\nconst path = optionalRequire('path');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  getIncludeFileHashs: () => { [string]: number },\n  onExport?: () => void,\n|};\n\ntype State = {|\n  networkPreviewDialogOpen: boolean,\n  networkPreviewHost: ?string,\n  networkPreviewPort: ?number,\n  networkPreviewError: ?any,\n  hotReloadsCount: number,\n  previewGamePath: ?string,\n  previewBrowserWindowOptions: ?{\n    width: number,\n    height: number,\n    useContentSize: boolean,\n    title: string,\n    backgroundColor: string,\n  },\n  hideMenuBar: boolean,\n  alwaysOnTop: boolean,\n|};\n\nexport default class LocalPreviewLauncher extends React.Component<\n  Props,\n  State\n> {\n  canDoNetworkPreview = () => true;\n  canDoHotReload = () => true;\n\n  state = {\n    networkPreviewDialogOpen: false,\n    networkPreviewHost: null,\n    networkPreviewPort: null,\n    networkPreviewError: null,\n    previewGamePath: null,\n    previewBrowserWindowOptions: null,\n    hotReloadsCount: 0,\n    hideMenuBar: true,\n    alwaysOnTop: true,\n  };\n  _networkPreviewSubscriptionChecker: ?SubscriptionCheckerInterface = null;\n  _hotReloadSubscriptionChecker: ?SubscriptionCheckerInterface = null;\n\n  _openPreviewBrowserWindow = () => {\n    const { previewGamePath, previewBrowserWindowOptions } = this.state;\n    if (!previewBrowserWindowOptions || !previewGamePath) return;\n\n    if (!ipcRenderer) return;\n\n    ipcRenderer.invoke('preview-open', {\n      previewBrowserWindowOptions,\n      previewGameIndexHtmlPath: `file://${previewGamePath}/index.html`,\n      alwaysOnTop: this.state.alwaysOnTop,\n      hideMenuBar: this.state.hideMenuBar,\n    });\n  };\n\n  closePreview = (windowId: number) => {\n    if (!ipcRenderer) return;\n    ipcRenderer.invoke('preview-close', { windowId });\n  };\n\n  _openPreviewWindow = (\n    project: gdProject,\n    gamePath: string,\n    options: PreviewOptions\n  ): void => {\n    this.setState(\n      {\n        previewBrowserWindowOptions: {\n          width: project.getGameResolutionWidth(),\n          height: project.getGameResolutionHeight(),\n          useContentSize: true,\n          title: `Preview of ${project.getName()}`,\n          backgroundColor: '#000000',\n          webPreferences: {\n            webSecurity: false, // Allow to access to local files,\n            // Allow Node.js API access in renderer process, as long\n            // as we've not removed dependency on it and on \"@electron/remote\".\n            nodeIntegration: true,\n            contextIsolation: false,\n          },\n        },\n        previewGamePath: gamePath,\n        hideMenuBar: !options.getIsMenuBarHiddenInPreview(),\n        alwaysOnTop: options.getIsAlwaysOnTopInPreview(),\n      },\n      () => {\n        if (!options.networkPreview) {\n          this._openPreviewBrowserWindow();\n        } else {\n          if (!ipcRenderer) return;\n\n          ipcRenderer.removeAllListeners('serve-folder-done');\n          ipcRenderer.removeAllListeners('local-network-ips');\n          ipcRenderer.on('serve-folder-done', (event, err, serverParams) => {\n            if (err) {\n              this.setState({\n                networkPreviewDialogOpen: true,\n                networkPreviewPort: null,\n                networkPreviewHost: null,\n                networkPreviewError: err,\n              });\n            } else {\n              this.setState({\n                networkPreviewDialogOpen: true,\n                networkPreviewPort: serverParams.port,\n              });\n            }\n\n            setTimeout(() => this._checkSubscriptionForNetworkPreview());\n          });\n          ipcRenderer.on('local-network-ip', (event, ipAddress) => {\n            this.setState({\n              networkPreviewHost: ipAddress,\n            });\n          });\n          ipcRenderer.send('serve-folder', {\n            root: gamePath,\n          });\n          ipcRenderer.send('get-local-network-ip');\n        }\n      }\n    );\n  };\n\n  _prepareExporter = (): Promise<{|\n    outputDir: string,\n    exporter: gdjsExporter,\n    gdjsRoot: string,\n  |}> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: false,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const outputDir = path.join(fileSystem.getTempDir(), 'preview');\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        outputDir,\n        exporter,\n        gdjsRoot,\n      };\n    });\n  };\n\n  launchPreview = (previewOptions: PreviewOptions): Promise<any> => {\n    const { project, layout, externalLayout } = previewOptions;\n\n    // Start the debugger server for previews. Even if not used,\n    // useful if the user opens the Debugger editor later, or want to\n    // hot reload.\n    return this.getPreviewDebuggerServer()\n      .startServer()\n      .catch(err => {\n        // Ignore any error when running the debugger server - the preview\n        // can still work without it.\n        console.error(\n          'Unable to start the Debugger Server for the preview:',\n          err\n        );\n      })\n      .then(() => this._prepareExporter())\n      .then(({ outputDir, exporter, gdjsRoot }) => {\n        timeFunction(\n          () => {\n            const previewExportOptions = new gd.PreviewExportOptions(\n              project,\n              outputDir\n            );\n            previewExportOptions.setIsDevelopmentEnvironment(Window.isDev());\n            previewExportOptions.setLayoutName(layout.getName());\n            if (externalLayout) {\n              previewExportOptions.setExternalLayoutName(\n                externalLayout.getName()\n              );\n            }\n\n            const previewDebuggerServerAddress = getDebuggerServerAddress();\n            if (previewDebuggerServerAddress) {\n              previewExportOptions.useWebsocketDebuggerClientWithServerAddress(\n                previewDebuggerServerAddress.address,\n                '' + previewDebuggerServerAddress.port\n              );\n            }\n\n            const includeFileHashs = this.props.getIncludeFileHashs();\n            for (const includeFile in includeFileHashs) {\n              const hash = includeFileHashs[includeFile];\n              previewExportOptions.setIncludeFileHash(includeFile, hash);\n            }\n\n            // Give the preview the path to the \"@electron/remote\" module of the editor,\n            // as this is required by some features and we've not removed dependency\n            // on \"@electron/remote\" yet.\n            previewExportOptions.setElectronRemoteRequirePath(\n              path.join(\n                gdjsRoot,\n                '../preview_node_modules',\n                '@electron/remote',\n                'renderer/index.js'\n              )\n            );\n\n            const debuggerIds = this.getPreviewDebuggerServer().getExistingDebuggerIds();\n            const shouldHotReload =\n              previewOptions.hotReload && !!debuggerIds.length;\n\n            previewExportOptions.setProjectDataOnlyExport(\n              // Only export project data if asked and if a hot-reloading is being done.\n              shouldHotReload && previewOptions.projectDataOnlyExport\n            );\n\n            previewExportOptions.setFullLoadingScreen(\n              previewOptions.fullLoadingScreen\n            );\n\n            if (previewOptions.fallbackAuthor) {\n              previewExportOptions.setFallbackAuthor(\n                previewOptions.fallbackAuthor.id,\n                previewOptions.fallbackAuthor.username\n              );\n            }\n\n            exporter.exportProjectForPixiPreview(previewExportOptions);\n            previewExportOptions.delete();\n            exporter.delete();\n\n            if (shouldHotReload) {\n              debuggerIds.forEach(debuggerId => {\n                this.getPreviewDebuggerServer().sendMessage(debuggerId, {\n                  command: 'hotReload',\n                });\n              });\n\n              if (\n                this.state.hotReloadsCount % 16 === 0 &&\n                this._hotReloadSubscriptionChecker\n              ) {\n                this._hotReloadSubscriptionChecker.checkUserHasSubscription();\n              }\n              this.setState(state => ({\n                hotReloadsCount: state.hotReloadsCount + 1,\n              }));\n            } else {\n              this._openPreviewWindow(project, outputDir, previewOptions);\n            }\n          },\n          time => console.info(`Preview took ${time}ms`)\n        );\n      });\n  };\n\n  getPreviewDebuggerServer() {\n    return localPreviewDebuggerServer;\n  }\n\n  _checkSubscriptionForNetworkPreview = () => {\n    if (!this._networkPreviewSubscriptionChecker) return true;\n\n    return this._networkPreviewSubscriptionChecker.checkUserHasSubscription();\n  };\n\n  render() {\n    const {\n      networkPreviewDialogOpen,\n      networkPreviewHost,\n      networkPreviewPort,\n      networkPreviewError,\n    } = this.state;\n\n    return (\n      <React.Fragment>\n        <SubscriptionChecker\n          ref={subscriptionChecker =>\n            (this._networkPreviewSubscriptionChecker = subscriptionChecker)\n          }\n          onChangeSubscription={() =>\n            this.setState({ networkPreviewDialogOpen: false })\n          }\n          id=\"Preview over wifi\"\n          title={<Trans>Preview over wifi</Trans>}\n          mode=\"try\"\n        />\n        <SubscriptionChecker\n          ref={subscriptionChecker =>\n            (this._hotReloadSubscriptionChecker = subscriptionChecker)\n          }\n          id=\"Hot reloading\"\n          title={\n            <Trans>Live preview (apply changes to the running preview)</Trans>\n          }\n          mode=\"try\"\n        />\n        <LocalNetworkPreviewDialog\n          open={networkPreviewDialogOpen}\n          url={\n            networkPreviewHost && networkPreviewPort\n              ? `${networkPreviewHost}:${networkPreviewPort}`\n              : null\n          }\n          error={networkPreviewError}\n          onClose={() => this.setState({ networkPreviewDialogOpen: false })}\n          onExport={this.props.onExport}\n          onRunPreviewLocally={this._openPreviewBrowserWindow}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nexport const timeFunction = (fn: Function, onResult: number => void) => {\n  var t0 = performance.now();\n  fn();\n  var t1 = performance.now();\n  onResult(t1 - t0);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Column, Line } from '../../UI/Grid';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport LocalFolderPicker from '../../UI/LocalFolderPicker';\nimport assignIn from 'lodash/assignIn';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/CordovaExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\nconst electron = optionalRequire('electron');\nconst shell = electron ? electron.shell : null;\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = {\n  outputDir: string,\n};\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n|};\n\ntype ExportOutput = {|\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = null;\n\ntype CompressionOutput = null;\n\nconst exportPipelineName = 'local-cordova';\n\nexport const localCordovaExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  packageNameWarningType: 'mobile',\n\n  getInitialExportState: (project: gdProject) => ({\n    outputDir: project.getLastCompilationDirectory(),\n  }),\n\n  canLaunchBuild: exportState => !!exportState.outputDir,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: ({ project, exportState, updateExportState, exportStep }) =>\n    exportStep !== 'done' ? (\n      <Column noMargin>\n        <Line>\n          <Column noMargin>\n            <ExplanationHeader />\n          </Column>\n        </Line>\n        <Line>\n          <LocalFolderPicker\n            type=\"export\"\n            value={exportState.outputDir}\n            defaultPath={project.getLastCompilationDirectory()}\n            onChange={outputDir => {\n              updateExportState(() => ({ outputDir }));\n              project.setLastCompilationDirectory(outputDir);\n            }}\n            fullWidth\n          />\n        </Line>\n      </Column>\n    ) : null,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      // TODO: Memory leak? Check for other exporters too.\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        localFileSystem,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      context.exportState.outputDir\n    );\n    exportOptions.setTarget('cordova');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      urlFiles: localFileSystem.getAllUrlFilesIn(context.exportState.outputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return null;\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    exportOutput: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    return Promise.resolve(null);\n  },\n\n  renderDoneFooter: ({ exportState }) => {\n    const openExportFolder = () => {\n      if (shell) shell.openPath(exportState.outputDir);\n    };\n\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <RaisedButton\n            key=\"open\"\n            label={<Trans>Open folder</Trans>}\n            primary={true}\n            onClick={openExportFolder}\n          />\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Column, Line } from '../../UI/Grid';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport LocalFolderPicker from '../../UI/LocalFolderPicker';\nimport assignIn from 'lodash/assignIn';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/ElectronExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\nconst electron = optionalRequire('electron');\nconst shell = electron ? electron.shell : null;\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = {\n  outputDir: string,\n};\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n|};\n\ntype ExportOutput = {|\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = null;\n\ntype CompressionOutput = null;\n\nconst exportPipelineName = 'local-electron';\n\nexport const localElectronExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  packageNameWarningType: 'desktop',\n\n  getInitialExportState: (project: gdProject) => ({\n    outputDir: project.getLastCompilationDirectory(),\n  }),\n\n  canLaunchBuild: exportState => !!exportState.outputDir,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: ({ project, exportState, updateExportState, exportStep }) =>\n    exportStep !== 'done' ? (\n      <Column noMargin expand>\n        <Line>\n          <Column noMargin>\n            <ExplanationHeader />\n          </Column>\n        </Line>\n        <Line>\n          <LocalFolderPicker\n            type=\"export\"\n            value={exportState.outputDir}\n            defaultPath={project.getLastCompilationDirectory()}\n            onChange={outputDir => {\n              updateExportState(() => ({ outputDir }));\n              project.setLastCompilationDirectory(outputDir);\n            }}\n            fullWidth\n          />\n        </Line>\n      </Column>\n    ) : null,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      // TODO: Memory leak? Check for other exporters too.\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        localFileSystem,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      context.exportState.outputDir\n    );\n    exportOptions.setTarget('electron');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      urlFiles: localFileSystem.getAllUrlFilesIn(context.exportState.outputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return null;\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    exportOutput: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    return Promise.resolve(null);\n  },\n\n  renderDoneFooter: ({ exportState }) => {\n    const openExportFolder = () => {\n      if (shell) shell.openPath(exportState.outputDir);\n    };\n\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <RaisedButton\n            key=\"open\"\n            label={<Trans>Open folder</Trans>}\n            primary={true}\n            onClick={openExportFolder}\n          />\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Column, Line } from '../../UI/Grid';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport LocalFolderPicker from '../../UI/LocalFolderPicker';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/HTML5Export';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\nimport DismissableTutorialMessage from '../../Hints/DismissableTutorialMessage';\n\nconst electron = optionalRequire('electron');\nconst shell = electron ? electron.shell : null;\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = {\n  outputDir: string,\n};\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n|};\n\ntype ExportOutput = {|\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = null;\n\ntype CompressionOutput = null;\n\nconst exportPipelineName = 'local-html5';\n\nexport const localHTML5ExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n\n  getInitialExportState: (project: gdProject) => ({\n    outputDir: project.getLastCompilationDirectory(),\n  }),\n\n  canLaunchBuild: exportState => !!exportState.outputDir,\n\n  isNavigationDisabled: () => false,\n\n  renderTutorial: () => (\n    <DismissableTutorialMessage tutorialId=\"export-to-itch\" />\n  ),\n\n  renderHeader: ({ project, exportState, updateExportState, exportStep }) =>\n    exportStep !== 'done' ? (\n      <Column noMargin expand>\n        <Line>\n          <ExplanationHeader />\n        </Line>\n        <Line>\n          <LocalFolderPicker\n            type=\"export\"\n            value={exportState.outputDir}\n            defaultPath={project.getLastCompilationDirectory()}\n            onChange={outputDir => {\n              updateExportState(() => ({ outputDir }));\n              project.setLastCompilationDirectory(outputDir);\n            }}\n            fullWidth\n          />\n        </Line>\n      </Column>\n    ) : null,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      // TODO: Memory leak? Check for other exporters too.\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        localFileSystem,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      context.exportState.outputDir\n    );\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      urlFiles: localFileSystem.getAllUrlFilesIn(context.exportState.outputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return null;\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    exportOutput: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    return Promise.resolve(null);\n  },\n\n  renderDoneFooter: ({ exportState }) => {\n    const openExportFolder = () => {\n      if (shell) shell.openPath(exportState.outputDir);\n    };\n\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <RaisedButton\n            primary\n            onClick={() => openExportFolder()}\n            label={<Trans>Open the exported game folder</Trans>}\n          />\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport TextField from '../TextField';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport FlatButton from '../FlatButton';\nconst electron = optionalRequire('electron');\nconst remote = optionalRequire('@electron/remote');\nconst dialog = remote ? remote.dialog : null;\n\nconst styles = {\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'baseline',\n  },\n  button: {\n    marginLeft: 10,\n  },\n  textField: {\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  value: string,\n  onChange: string => void,\n  title: string,\n  message: string,\n  defaultPath?: string,\n  fullWidth?: boolean,\n  filters: Array<{\n    name: string,\n    extensions: Array<string>,\n  }>,\n|};\n\nconst LocalFilePicker = ({\n  value,\n  onChange,\n  title,\n  message,\n  defaultPath,\n  fullWidth,\n  filters,\n}: Props) => {\n  const onChooseFolder = async () => {\n    if (!dialog || !electron) return;\n\n    const browserWindow = remote.getCurrentWindow();\n    const { filePath } = await dialog.showSaveDialog(browserWindow, {\n      title: title,\n      filters: filters,\n      message: message,\n      defaultPath: defaultPath,\n    });\n    onChange(filePath || '');\n  };\n\n  return (\n    <div\n      style={{\n        ...styles.container,\n        width: fullWidth ? '100%' : undefined,\n      }}\n    >\n      <TextField\n        margin=\"dense\"\n        style={styles.textField}\n        type=\"text\"\n        translatableHintText={t`Choose a file`}\n        value={value}\n        onChange={(event, value) => onChange(value)}\n      />\n      <FlatButton\n        label={<Trans>Choose</Trans>}\n        style={styles.button}\n        onClick={onChooseFolder}\n      />\n    </div>\n  );\n};\n\nexport default LocalFilePicker;\n","//@flow\nimport optionalRequire from './OptionalRequire';\n\n/**\n * Return a function that will load, only when called, the specified module name.\n *\n * As `optionalRequire`, this allows to require a Node.js/npm module without having it bundled by webpack.\n * This means that this module will only be available when running on Electron or Node.js.\n * When running without Electron or Node.js, `null` will be returned.\n */\nexport default function optionalLazyRequire(moduleName: string) {\n  let moduleLoaded = false;\n  let module = undefined;\n  return (): ?any => {\n    if (moduleLoaded) {\n      return module;\n    }\n\n    console.info(`Lazy loading ${moduleName}...`);\n    module = optionalRequire(moduleName);\n    moduleLoaded = true;\n    return module;\n  };\n}\n","// @flow\n\nimport optionalRequire from './OptionalRequire';\nimport optionalLazyRequire from '../Utils/OptionalLazyRequire';\nconst fs = optionalRequire('fs');\nconst lazyRequireArchiver = optionalLazyRequire('archiver');\n\n// TODO: Move in a Archiver folder?\n/**\n * Archive the given folder to a file. Only available when running on Electron runtime.\n */\nexport const archiveLocalFolder = ({\n  path,\n  outputFilename,\n  sizeLimit,\n}: {|\n  path: string,\n  outputFilename: string,\n  sizeLimit?: number,\n|}): Promise<string> => {\n  const archiver = lazyRequireArchiver();\n  return new Promise((resolve, reject) => {\n    if (!fs || !archiver) return reject(new Error('Archiver unavailable'));\n\n    const output = fs.createWriteStream(outputFilename);\n    const archive = archiver('zip', {\n      zlib: { level: 9 }, // Sets the compression level.\n    });\n\n    output.on('close', () => {\n      const fileSize = archive.pointer();\n      console.log(\n        `Archive written at ${outputFilename}, ${fileSize} total bytes.`\n      );\n      if (sizeLimit && fileSize > sizeLimit) {\n        const roundFileSizeInMb = Math.round(fileSize / (1000 * 1000));\n        reject(\n          new Error(\n            `Archive is of size ${roundFileSizeInMb} MB, which is above the limit allowed of ${sizeLimit /\n              (1000 * 1000)} MB.`\n          )\n        );\n      }\n      resolve(outputFilename);\n    });\n\n    archive.on('error', err => {\n      reject(err);\n    });\n\n    archive.pipe(output);\n\n    archive.directory(path, false);\n\n    archive.finalize();\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Column, Line } from '../../UI/Grid';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport assignIn from 'lodash/assignIn';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport LocalFilePicker from '../../UI/LocalFilePicker';\nimport { archiveLocalFolder } from '../../Utils/LocalArchiver';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/FacebookInstantGamesExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\n\nconst path = optionalRequire('path');\nconst electron = optionalRequire('electron');\nconst remote = optionalRequire('@electron/remote');\nconst app = remote ? remote.app : null;\nconst shell = electron ? electron.shell : null;\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = {\n  archiveOutputFilename: string,\n};\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n  temporaryOutputDir: string,\n|};\n\ntype ExportOutput = {|\n  temporaryOutputDir: string,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  temporaryOutputDir: string,\n|};\n\ntype CompressionOutput = string;\n\nconst exportPipelineName = 'local-facebook-instant-games';\n\nexport const localFacebookInstantGamesExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n\n  getInitialExportState: (project: gdProject) => ({\n    archiveOutputFilename: app\n      ? path.join(app.getPath('documents'), 'fb-instant-game.zip')\n      : '',\n  }),\n\n  canLaunchBuild: exportState => !!exportState.archiveOutputFilename,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: ({ project, exportState, updateExportState, exportStep }) =>\n    exportStep !== 'done' ? (\n      <Column noMargin expand>\n        <Line>\n          <ExplanationHeader />\n        </Line>\n        <Line>\n          <LocalFilePicker\n            title={'Facebook Instant Games export zip file'}\n            message={\n              'Choose where to save the exported file for Facebook Instant Games'\n            }\n            filters={[\n              {\n                name: 'Compressed file for Facebook Instant Games',\n                extensions: ['zip'],\n              },\n            ]}\n            value={exportState.archiveOutputFilename}\n            defaultPath={app ? app.getPath('documents') : ''}\n            onChange={value =>\n              updateExportState(() => ({ archiveOutputFilename: value }))\n            }\n            fullWidth\n          />\n        </Line>\n      </Column>\n    ) : null,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      // TODO: Memory leak? Check for other exporters too.\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n      const temporaryOutputDir = path.join(\n        fileSystem.getTempDir(),\n        'FacebookInstantGamesExport'\n      );\n      fileSystem.mkDir(temporaryOutputDir);\n      fileSystem.clearDir(temporaryOutputDir);\n\n      return {\n        exporter,\n        localFileSystem,\n        temporaryOutputDir,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem, temporaryOutputDir }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      temporaryOutputDir\n    );\n    exportOptions.setTarget('facebookInstantGames');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      temporaryOutputDir,\n      urlFiles: localFileSystem.getAllUrlFilesIn(temporaryOutputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return { temporaryOutputDir };\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir }: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    return archiveLocalFolder({\n      path: temporaryOutputDir,\n      outputFilename: context.exportState.archiveOutputFilename,\n    });\n  },\n\n  renderDoneFooter: ({ exportState }) => {\n    const openExportFolder = () => {\n      if (shell && path)\n        shell.openPath(path.dirname(exportState.archiveOutputFilename));\n    };\n\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <RaisedButton\n            key=\"open\"\n            label={<Trans>Open folder</Trans>}\n            primary={true}\n            onClick={openExportFolder}\n          />\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport optionalRequire from '../../Utils/OptionalRequire';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\ntype UploadOptions = {\n  signedUrl: string,\n  contentType: string,\n};\n\nexport const uploadLocalFile = (\n  localFilePath: string,\n  uploadOptions: UploadOptions,\n  onProgress: (progress: number, total: number) => void\n): Promise<void> => {\n  if (!ipcRenderer) return Promise.reject('No support for local file upload');\n\n  ipcRenderer.removeAllListeners('local-file-upload-progress');\n  ipcRenderer.removeAllListeners('local-file-upload-done');\n\n  return new Promise((resolve, reject) => {\n    ipcRenderer.on(\n      'local-file-upload-progress',\n      (event, stepCurrentProgress, stepMaxProgress) => {\n        onProgress(stepCurrentProgress, stepMaxProgress);\n      }\n    );\n    ipcRenderer.on('local-file-upload-done', (event, err) => {\n      if (err) return reject(err);\n      resolve();\n    });\n    ipcRenderer.send('local-file-upload', localFilePath, uploadOptions);\n  });\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildCordovaAndroid,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadLocalFile } from './LocalFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport { archiveLocalFolder } from '../../Utils/LocalArchiver';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  type ExportState,\n  SetupExportHeader,\n  ExportFlow,\n} from '../GenericExporters/OnlineCordovaExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\n\nconst path = optionalRequire('path');\nconst os = optionalRequire('os');\nconst gd: libGDevelop = global.gd;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n  temporaryOutputDir: string,\n|};\n\ntype ExportOutput = {|\n  temporaryOutputDir: string,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  temporaryOutputDir: string,\n|};\n\ntype CompressionOutput = string;\n\nconst exportPipelineName = 'local-online-cordova';\n\nexport const localOnlineCordovaExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'cordova-build',\n  limitedBuilds: true,\n  packageNameWarningType: 'mobile',\n\n  getInitialExportState: () => ({\n    targets: ['androidApk'],\n    keystore: 'new',\n    signingDialogOpen: false,\n  }),\n\n  // Build can be launched only if just opened the dialog or build errored.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    errored || exportStep === '',\n\n  // Navigation is enabled when the build is errored or whilst uploading.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored &&\n    ['register', 'export', 'resources-download', 'compress', 'upload'].includes(\n      exportStep\n    ),\n\n  renderHeader: props => <SetupExportHeader {...props} />,\n\n  shouldSuggestBumpingVersionNumber: () => true,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n      const temporaryOutputDir = path.join(\n        fileSystem.getTempDir(),\n        'OnlineCordovaExport'\n      );\n      fileSystem.mkDir(temporaryOutputDir);\n      fileSystem.clearDir(temporaryOutputDir);\n\n      return {\n        exporter,\n        localFileSystem,\n        temporaryOutputDir,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem, temporaryOutputDir }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      temporaryOutputDir\n    );\n    exportOptions.setTarget('cordova');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      temporaryOutputDir,\n      urlFiles: localFileSystem.getAllUrlFilesIn(temporaryOutputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return { temporaryOutputDir };\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir }: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    const archiveOutputDir = os.tmpdir();\n    return archiveLocalFolder({\n      path: temporaryOutputDir,\n      outputFilename: path.join(archiveOutputDir, 'game-archive.zip'),\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    outputFile: CompressionOutput\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadLocalFile(\n        outputFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, firebaseUser } = authenticatedUser;\n    if (!firebaseUser)\n      return Promise.reject(new Error('User is not authenticated'));\n\n    return buildCordovaAndroid(\n      getAuthorizationHeader,\n      firebaseUser.uid,\n      uploadBucketKey,\n      exportState.targets,\n      exportState.keystore,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildCordovaIos,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadLocalFile } from './LocalFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport { archiveLocalFolder } from '../../Utils/LocalArchiver';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  type ExportState,\n  SetupExportHeader,\n  ExportFlow,\n} from '../GenericExporters/OnlineCordovaIosExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\n\nconst path = optionalRequire('path');\nconst os = optionalRequire('os');\nconst gd: libGDevelop = global.gd;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n  temporaryOutputDir: string,\n|};\n\ntype ExportOutput = {|\n  temporaryOutputDir: string,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  temporaryOutputDir: string,\n|};\n\ntype CompressionOutput = string;\n\nconst exportPipelineName = 'local-online-cordova-ios';\n\nexport const localOnlineCordovaIosExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'cordova-ios-build',\n  limitedBuilds: true,\n  packageNameWarningType: 'mobile',\n\n  getInitialExportState: () => ({\n    targets: ['iosAppStore'],\n    signing: null,\n  }),\n\n  // Build can be launched only if just opened the dialog or build errored.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    (errored || exportStep === '') && !!exportState.signing,\n\n  // Navigation is enabled when the build is errored or whilst uploading.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored &&\n    ['register', 'export', 'resources-download', 'compress', 'upload'].includes(\n      exportStep\n    ),\n\n  renderHeader: props => <SetupExportHeader {...props} />,\n\n  shouldSuggestBumpingVersionNumber: () => true,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n      const temporaryOutputDir = path.join(\n        fileSystem.getTempDir(),\n        'OnlineCordovaExport'\n      );\n      fileSystem.mkDir(temporaryOutputDir);\n      fileSystem.clearDir(temporaryOutputDir);\n\n      return {\n        exporter,\n        localFileSystem,\n        temporaryOutputDir,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem, temporaryOutputDir }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      temporaryOutputDir\n    );\n    exportOptions.setTarget('cordova');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      temporaryOutputDir,\n      urlFiles: localFileSystem.getAllUrlFilesIn(temporaryOutputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return { temporaryOutputDir };\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir }: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    const archiveOutputDir = os.tmpdir();\n    return archiveLocalFolder({\n      path: temporaryOutputDir,\n      outputFilename: path.join(archiveOutputDir, 'game-archive.zip'),\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    outputFile: CompressionOutput\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadLocalFile(\n        outputFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, profile } = authenticatedUser;\n    if (!profile) return Promise.reject(new Error('User is not authenticated'));\n    if (!exportState.signing)\n      return Promise.reject(new Error('Signing options not set up'));\n\n    return buildCordovaIos(\n      getAuthorizationHeader,\n      profile.id,\n      uploadBucketKey,\n      exportState.targets,\n      exportState.signing,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildElectron,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport { uploadLocalFile } from './LocalFileUploader';\nimport { archiveLocalFolder } from '../../Utils/LocalArchiver';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  type ExportState,\n  SetupExportHeader,\n  ExportFlow,\n} from '../GenericExporters/OnlineElectronExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\n\nconst path = optionalRequire('path');\nconst os = optionalRequire('os');\nconst gd: libGDevelop = global.gd;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n  temporaryOutputDir: string,\n|};\n\ntype ExportOutput = {|\n  temporaryOutputDir: string,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  temporaryOutputDir: string,\n|};\n\ntype CompressionOutput = string;\n\nconst exportPipelineName = 'local-online-electron';\n\nexport const localOnlineElectronExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'electron-build',\n  limitedBuilds: true,\n  packageNameWarningType: 'desktop',\n\n  getInitialExportState: () => ({\n    targets: ['winExe'],\n  }),\n\n  // Build can be launched only if just opened the dialog or build errored.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    !!exportState.targets.length && (errored || exportStep === ''),\n\n  // Navigation is enabled when the build is errored or whilst uploading.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored &&\n    ['register', 'export', 'resources-download', 'compress', 'upload'].includes(\n      exportStep\n    ),\n\n  renderHeader: props => <SetupExportHeader {...props} />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n      const temporaryOutputDir = path.join(\n        fileSystem.getTempDir(),\n        'OnlineElectronExport'\n      );\n      fileSystem.mkDir(temporaryOutputDir);\n      fileSystem.clearDir(temporaryOutputDir);\n\n      return {\n        exporter,\n        localFileSystem,\n        temporaryOutputDir,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem, temporaryOutputDir }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      temporaryOutputDir\n    );\n    exportOptions.setTarget('electron');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      temporaryOutputDir,\n      urlFiles: localFileSystem.getAllUrlFilesIn(temporaryOutputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return { temporaryOutputDir };\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir }: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    const archiveOutputDir = os.tmpdir();\n    return archiveLocalFolder({\n      path: temporaryOutputDir,\n      outputFilename: path.join(archiveOutputDir, 'game-archive.zip'),\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    outputFile: CompressionOutput\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadLocalFile(\n        outputFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, firebaseUser } = authenticatedUser;\n    if (!firebaseUser)\n      return Promise.reject(new Error('User is not authenticated'));\n\n    return buildElectron(\n      getAuthorizationHeader,\n      firebaseUser.uid,\n      uploadBucketKey,\n      exportState.targets,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildWeb,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadLocalFile } from './LocalFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/LocalGDJSFinder';\nimport { archiveLocalFolder } from '../../Utils/LocalArchiver';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport LocalFileSystem, { type UrlFileDescriptor } from './LocalFileSystem';\nimport {\n  type ExportPipeline,\n  type ExportPipelineContext,\n  type ExportFlowProps,\n} from '../ExportPipeline.flow';\nimport { ExplanationHeader } from '../GenericExporters/OnlineWebExport';\nimport { downloadUrlsToLocalFiles } from '../../Utils/LocalFileDownloader';\nimport OnlineWebExportFlow from '../GenericExporters/OnlineWebExport/OnlineWebExportFlow';\n\nconst path = optionalRequire('path');\nconst os = optionalRequire('os');\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = null;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  localFileSystem: LocalFileSystem,\n  temporaryOutputDir: string,\n|};\n\ntype ExportOutput = {|\n  temporaryOutputDir: string,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  temporaryOutputDir: string,\n|};\n\ntype CompressionOutput = string;\n\nconst exportPipelineName = 'local-online-web';\n\nexport const localOnlineWebExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'web-build',\n\n  getInitialExportState: () => null,\n\n  // Build can be launched if just opened the dialog or build errored, re-enabled when done.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    errored || exportStep === '' || exportStep === 'done',\n\n  // Navigation is enabled when the build is errored or if the build is not done.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored && !['', 'done'].includes(exportStep),\n\n  renderHeader: () => <ExplanationHeader />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <OnlineWebExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS().then(({ gdjsRoot }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const localFileSystem = new LocalFileSystem({\n        downloadUrlsToLocalFiles: true,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        localFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n      const temporaryOutputDir = path.join(\n        fileSystem.getTempDir(),\n        'OnlineWebExport'\n      );\n      fileSystem.mkDir(temporaryOutputDir);\n      fileSystem.clearDir(temporaryOutputDir);\n\n      return {\n        exporter,\n        localFileSystem,\n        temporaryOutputDir,\n      };\n    });\n  },\n\n  launchExport: async (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, localFileSystem, temporaryOutputDir }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const exportOptions = new gd.ExportOptions(\n      context.project,\n      temporaryOutputDir\n    );\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return {\n      temporaryOutputDir,\n      urlFiles: localFileSystem.getAllUrlFilesIn(temporaryOutputDir),\n    };\n  },\n\n  launchResourcesDownload: async (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    await downloadUrlsToLocalFiles({\n      urlContainers: urlFiles,\n      onProgress: context.updateStepProgress,\n      throwIfAnyError: true,\n    });\n\n    return { temporaryOutputDir };\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { temporaryOutputDir }: ResourcesDownloadOutput\n  ): Promise<CompressionOutput> => {\n    const archiveOutputDir = os.tmpdir();\n    return archiveLocalFolder({\n      path: temporaryOutputDir,\n      outputFilename: path.join(archiveOutputDir, 'game-archive.zip'),\n      sizeLimit: 250 * 1000 * 1000,\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    outputFile: CompressionOutput\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadLocalFile(\n        outputFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, firebaseUser } = authenticatedUser;\n    if (!firebaseUser)\n      return Promise.reject(new Error('User is not authenticated'));\n\n    return buildWeb(\n      getAuthorizationHeader,\n      firebaseUser.uid,\n      uploadBucketKey,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport { type Exporter } from '../ShareDialog';\nimport { localCordovaExportPipeline } from './LocalCordovaExport';\nimport { localElectronExportPipeline } from './LocalElectronExport';\nimport { localHTML5ExportPipeline } from './LocalHTML5Export';\nimport { localFacebookInstantGamesExportPipeline } from './LocalFacebookInstantGamesExport';\nimport { localOnlineCordovaExportPipeline } from './LocalOnlineCordovaExport';\nimport { localOnlineCordovaIosExportPipeline } from './LocalOnlineCordovaIosExport';\nimport { localOnlineElectronExportPipeline } from './LocalOnlineElectronExport';\nimport { localOnlineWebExportPipeline } from './LocalOnlineWebExport';\nimport { cordovaExporter } from '../GenericExporters/CordovaExport';\nimport { onlineWebExporter } from '../GenericExporters/OnlineWebExport';\nimport { html5Exporter } from '../GenericExporters/HTML5Export';\nimport { facebookInstantGamesExporter } from '../GenericExporters/FacebookInstantGamesExport';\nimport { onlineCordovaExporter } from '../GenericExporters/OnlineCordovaExport';\nimport { onlineCordovaIosExporter } from '../GenericExporters/OnlineCordovaIosExport';\nimport { onlineElectronExporter } from '../GenericExporters/OnlineElectronExport';\nimport { electronExporter } from '../GenericExporters/ElectronExport';\n\nexport const localOnlineWebExporter: Exporter = {\n  ...onlineWebExporter,\n  exportPipeline: localOnlineWebExportPipeline,\n};\n\nexport const localAutomatedExporters: Array<Exporter> = [\n  {\n    ...html5Exporter,\n    exportPipeline: localHTML5ExportPipeline,\n  },\n  {\n    ...onlineCordovaExporter,\n    exportPipeline: localOnlineCordovaExportPipeline,\n  },\n  {\n    ...onlineCordovaIosExporter,\n    exportPipeline: localOnlineCordovaIosExportPipeline,\n  },\n  {\n    ...onlineElectronExporter,\n    exportPipeline: localOnlineElectronExportPipeline,\n  },\n  {\n    ...facebookInstantGamesExporter,\n    exportPipeline: localFacebookInstantGamesExportPipeline,\n  },\n];\n\nexport const localManualExporters: Array<Exporter> = [\n  {\n    ...html5Exporter,\n    exportPipeline: localHTML5ExportPipeline,\n  },\n  {\n    ...cordovaExporter,\n    exportPipeline: localCordovaExportPipeline,\n  },\n  {\n    ...electronExporter,\n    exportPipeline: localElectronExportPipeline,\n  },\n];\n","// @flow\nimport * as React from 'react';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport { useCommandWithOptions } from '../CommandPalette/CommandHooks';\nimport {\n  buildMainMenuDeclarativeTemplate,\n  type BuildMainMenuProps,\n  type MainMenuCallbacks,\n  type MainMenuExtraCallbacks,\n  type MainMenuEvent,\n} from './MainMenu';\nimport PreferencesContext from './Preferences/PreferencesContext';\nconst electron = optionalRequire('electron');\nconst remote = optionalRequire('@electron/remote');\nconst app = remote ? remote.app : null;\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\n// Custom hook to register and deregister IPC listener\nconst useIPCEventListener = ({\n  ipcEvent,\n  callback,\n  shouldApply,\n}: {\n  ipcEvent: MainMenuEvent,\n  callback: Function,\n  shouldApply: boolean,\n}) => {\n  React.useEffect(\n    () => {\n      if (!ipcRenderer || !shouldApply) return;\n\n      const handler = (event, ...eventArgs) => callback(...eventArgs);\n      ipcRenderer.on(ipcEvent, handler);\n      return () => ipcRenderer.removeListener(ipcEvent, handler);\n    },\n    [ipcEvent, callback, shouldApply]\n  );\n};\n\nconst useAppEventListener = ({\n  event,\n  callback,\n}: {\n  event: string,\n  callback: Function,\n}) => {\n  React.useEffect(\n    () => {\n      if (!app) return;\n      const handler = (event, ...eventArgs) => callback(...eventArgs);\n      app.on(event, handler);\n      return () => app.removeListener(event, handler);\n    },\n    [event, callback]\n  );\n};\n\nconst isMainWindow = (windowTitle: string): boolean => {\n  if (!windowTitle) return false;\n  const lowercaseTitle = windowTitle.toLowerCase();\n  return (\n    lowercaseTitle.startsWith('gdevelop') &&\n    lowercaseTitle !== 'gdevelop dialogue tree editor (yarn)' &&\n    lowercaseTitle !== 'gdevelop sound effects editor (jfxr)' &&\n    lowercaseTitle !== 'gdevelop image editor (piskel)'\n  );\n};\n\n/**\n * Create and update the editor main menu using Electron APIs.\n */\nconst ElectronMainMenu = ({\n  props,\n  callbacks,\n  extraCallbacks,\n}: {|\n  props: BuildMainMenuProps,\n  callbacks: MainMenuCallbacks,\n  extraCallbacks: MainMenuExtraCallbacks,\n|}) => {\n  const {\n    i18n,\n    project,\n    canSaveProjectAs,\n    recentProjectFiles,\n    shortcutMap,\n    isApplicationTopLevelMenu,\n  } = props;\n  const { onClosePreview } = extraCallbacks;\n  const language = i18n.language;\n  const [\n    isFocusedOnMainWindow,\n    setIsFocusedOnMainWindow,\n  ] = React.useState<boolean>(true);\n  const [focusedWindowId, setFocusedWindowId] = React.useState<number>(\n    remote.getCurrentWindow().id\n  );\n  const closePreviewWindow =\n    !isFocusedOnMainWindow && onClosePreview\n      ? () => onClosePreview(focusedWindowId)\n      : null;\n  const {\n    values: { useShortcutToClosePreviewWindow },\n  } = React.useContext(PreferencesContext);\n\n  useAppEventListener({\n    event: 'browser-window-focus',\n    callback: window => {\n      setFocusedWindowId(window.id);\n      setIsFocusedOnMainWindow(isMainWindow(window.title));\n    },\n  });\n  useAppEventListener({\n    event: 'browser-window-blur',\n    callback: window => {\n      setIsFocusedOnMainWindow(!isMainWindow(window.title));\n    },\n  });\n\n  // We could use a for loop, but for safety let's write every hook one by\n  // one to avoid any change at runtime which would break the rules of hooks.\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open',\n    callback: callbacks.onChooseProject,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-recent',\n    callback: callbacks.onOpenRecentFile,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-save',\n    callback: callbacks.onSaveProject,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-save-as',\n    callback: callbacks.onSaveProjectAs,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-show-version-history',\n    callback: callbacks.onShowVersionHistory,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-close',\n    callback:\n      useShortcutToClosePreviewWindow && closePreviewWindow\n        ? closePreviewWindow\n        : callbacks.onCloseProject,\n    shouldApply:\n      useShortcutToClosePreviewWindow && closePreviewWindow\n        ? true\n        : isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-close-app',\n    callback: callbacks.onCloseApp,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-export',\n    callback: callbacks.onExportProject,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-invite-collaborators',\n    callback: callbacks.onInviteCollaborators,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-create-template',\n    callback: callbacks.onCreateProject,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-create-blank',\n    callback: callbacks.onCreateBlank,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-project-manager',\n    callback: callbacks.onOpenProjectManager,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-home-page',\n    callback: callbacks.onOpenHomePage,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-debugger',\n    callback: callbacks.onOpenDebugger,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-about',\n    callback: callbacks.onOpenAbout,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-preferences',\n    callback: callbacks.onOpenPreferences,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-language',\n    callback: callbacks.onOpenLanguage,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'main-menu-open-profile',\n    callback: callbacks.onOpenProfile,\n    shouldApply: isFocusedOnMainWindow,\n  });\n  useIPCEventListener({\n    ipcEvent: 'update-status',\n    callback: callbacks.setElectronUpdateStatus,\n    shouldApply: true, // Keep logic around app update even if on preview window\n  });\n\n  React.useEffect(\n    () => {\n      if (ipcRenderer) {\n        ipcRenderer.send(\n          'set-main-menu',\n          buildMainMenuDeclarativeTemplate({\n            project,\n            canSaveProjectAs,\n            i18n,\n            recentProjectFiles,\n            shortcutMap,\n            isApplicationTopLevelMenu,\n          })\n        );\n      }\n    },\n    [\n      i18n,\n      language,\n      project,\n      canSaveProjectAs,\n      recentProjectFiles,\n      shortcutMap,\n      isApplicationTopLevelMenu,\n    ]\n  );\n\n  const { onOpenRecentFile } = callbacks;\n  useCommandWithOptions('OPEN_RECENT_PROJECT', true, {\n    generateOptions: React.useCallback(\n      () =>\n        recentProjectFiles.map(item => ({\n          text: item.fileMetadata.fileIdentifier,\n          handler: () => onOpenRecentFile(item),\n        })),\n      [onOpenRecentFile, recentProjectFiles]\n    ),\n  });\n\n  return null;\n};\n\nexport default ElectronMainMenu;\n","// @flow\nimport {\n  type EventsFunctionCodeWriter,\n  type EventsFunctionCodeWriterCallbacks,\n} from '..';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { getUID } from '../../Utils/LocalUserInfo';\nimport slugs from 'slugs';\nconst path = optionalRequire('path');\nconst os = optionalRequire('os');\nconst fs = optionalRequire('fs');\n\n/**\n * Create the EventsFunctionCodeWriter that writes generated code for events functions\n * to local files.\n */\nexport const makeLocalEventsFunctionCodeWriter = ({\n  onWriteFile,\n}: EventsFunctionCodeWriterCallbacks): EventsFunctionCodeWriter => {\n  // The generated code for extensions will be stored in a temporary directory\n\n  const outputDir = path.join(\n    os.tmpdir(),\n    `GDGeneratedEventsFunctions-` + getUID()\n  );\n  fs.mkdir(outputDir, err => {\n    if (err && err.code !== 'EEXIST') {\n      console.error(\n        'Unable to create the directory where to output events functions generated code: ',\n        err\n      );\n      return;\n    }\n  });\n\n  const getPathFor = (codeNamespace: string) => {\n    return `${outputDir}/${slugs(codeNamespace)}.js`;\n  };\n\n  return {\n    getIncludeFileFor: (codeNamespace: string) => getPathFor(codeNamespace),\n    writeFunctionCode: (\n      functionCodeNamespace: string,\n      code: string\n    ): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        const includeFile = getPathFor(functionCodeNamespace);\n        onWriteFile({ includeFile, content: code });\n        fs.writeFile(includeFile, code, err => {\n          if (err) return reject(err);\n\n          resolve();\n        });\n      });\n    },\n    writeBehaviorCode: (\n      behaviorCodeNamespace: string,\n      code: string\n    ): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        const includeFile = getPathFor(behaviorCodeNamespace);\n        onWriteFile({ includeFile, content: code });\n        fs.writeFile(includeFile, code, err => {\n          if (err) return reject(err);\n\n          resolve();\n        });\n      });\n    },\n    writeObjectCode: (\n      objectCodeNamespace: string,\n      code: string\n    ): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        const includeFile = getPathFor(objectCodeNamespace);\n        onWriteFile({ includeFile, content: code });\n        fs.writeFile(includeFile, code, err => {\n          if (err) return reject(err);\n\n          resolve();\n        });\n      });\n    },\n  };\n};\n","// @flow\nimport { serializeToJSObject } from '../../Utils/Serializer';\nimport optionalRequire from '../../Utils/OptionalRequire';\nconst fs = optionalRequire('fs-extra');\nconst path = optionalRequire('path');\nconst remote = optionalRequire('@electron/remote');\nconst dialog = remote ? remote.dialog : null;\n\nconst writeJSONFile = (object: Object, filepath: string): Promise<void> => {\n  if (!fs) return Promise.reject(new Error('Filesystem is not supported.'));\n\n  try {\n    const content = JSON.stringify(object, null, 2);\n    return fs.ensureDir(path.dirname(filepath)).then(\n      () =>\n        new Promise((resolve, reject) => {\n          fs.writeFile(filepath, content, (err: ?Error) => {\n            if (err) {\n              return reject(err);\n            }\n\n            return resolve();\n          });\n        })\n    );\n  } catch (stringifyException) {\n    return Promise.reject(stringifyException);\n  }\n};\n\nexport default class LocalEventsFunctionsExtensionWriter {\n  static chooseEventsFunctionExtensionFile = (\n    extensionName?: string\n  ): Promise<?string> => {\n    if (!dialog) return Promise.reject('Not supported');\n    const browserWindow = remote.getCurrentWindow();\n\n    return dialog\n      .showSaveDialog(browserWindow, {\n        title: 'Export an extension of the project',\n        filters: [\n          {\n            name: 'GDevelop 5 \"events based\" extension',\n            extensions: ['json'],\n          },\n        ],\n        defaultPath: extensionName || 'Extension.json',\n      })\n      .then(({ filePath }) => {\n        if (!filePath) return null;\n        return filePath;\n      });\n  };\n\n  static writeEventsFunctionsExtension = (\n    extension: gdEventsFunctionsExtension,\n    filepath: string\n  ): Promise<void> => {\n    const serializedObject = serializeToJSObject(extension);\n    return writeJSONFile(serializedObject, filepath).catch(err => {\n      console.error('Unable to write the events function extension:', err);\n      throw err;\n    });\n  };\n}\n","// @flow\nimport optionalRequire from '../../Utils/OptionalRequire';\nconst fs = optionalRequire('fs');\nconst remote = optionalRequire('@electron/remote');\nconst dialog = remote ? remote.dialog : null;\n\nconst readJSONFile = (filepath: string): Promise<Object> => {\n  if (!fs) return Promise.reject('Filesystem is not supported.');\n\n  return new Promise((resolve, reject) => {\n    fs.readFile(filepath, { encoding: 'utf8' }, (err, data) => {\n      if (err) return reject(err);\n\n      try {\n        const dataObject = JSON.parse(data);\n        return resolve(dataObject);\n      } catch (ex) {\n        return reject(filepath + ' is a corrupted/malformed file.');\n      }\n    });\n  });\n};\n\nexport default class LocalEventsFunctionsExtensionOpener {\n  static chooseEventsFunctionExtensionFile = (): Promise<?string> => {\n    if (!dialog) return Promise.reject('Not supported');\n    const browserWindow = remote.getCurrentWindow();\n\n    return dialog\n      .showOpenDialog(browserWindow, {\n        title: 'Import an extension in the project',\n        properties: ['openFile'],\n        message: 'Choose an extension file to import (.json file)',\n        filters: [\n          {\n            name: 'GDevelop 5 \"events based\" extension',\n            extensions: ['json'],\n          },\n        ],\n      })\n      .then(({ filePaths }) => {\n        if (!filePaths || !filePaths.length) return null;\n        return filePaths[0];\n      });\n  };\n\n  static readEventsFunctionExtensionFile = (\n    filepath: string\n  ): Promise<Object> => {\n    return readJSONFile(filepath);\n  };\n}\n","// @flow\n// TODO: This module could be published on npm if useful.\nimport newNameGenerator from './NewNameGenerator';\nimport slugs from 'slugs';\n\ntype PartialObjectDescription = {|\n  reference: string,\n  object: Object,\n|};\n\ntype Reference = {\n  referenceTo: string,\n};\n\ntype SplitConfiguration = {|\n  pathSeparator: string,\n  getArrayItemReferenceName: (\n    object: Object,\n    currentReference: string\n  ) => string,\n  shouldSplit: (path: string) => boolean,\n  isReferenceMagicPropertyName: string,\n|};\n\ntype UnsplitConfiguration = {|\n  isReferenceMagicPropertyName: string,\n  getReferencePartialObject: (referencePath: string) => Promise<Object>,\n  maxUnsplitDepth?: number,\n|};\n\n/**\n * Mutate the given object to split it into multiple partial objects.\n * Partial objects will be replaced by references.\n *\n * @param object The object to be split.\n * @param configuration Configuration to be used to split the object.\n */\nexport const split = (\n  object: Object,\n  {\n    pathSeparator,\n    getArrayItemReferenceName,\n    shouldSplit,\n    isReferenceMagicPropertyName,\n  }: SplitConfiguration\n): Array<PartialObjectDescription> => {\n  const partialObjects = [];\n  const createReference = (reference, object): Reference => {\n    partialObjects.push({\n      reference,\n      object,\n    });\n\n    return {\n      [isReferenceMagicPropertyName]: true,\n      referenceTo: reference,\n    };\n  };\n\n  const splitObject = (\n    currentObject: Object,\n    currentPath: string,\n    currentReference: string\n  ) => {\n    if (currentObject !== null && typeof currentObject === 'object') {\n      if (Array.isArray(currentObject)) {\n        for (let index in currentObject) {\n          const itemPath = currentPath + pathSeparator + '*';\n          if (shouldSplit(itemPath)) {\n            const partialObject = currentObject[index];\n            const name = getArrayItemReferenceName(\n              partialObject,\n              currentReference\n            );\n            const itemReference = currentReference + pathSeparator + name;\n\n            currentObject[index] = createReference(\n              itemReference,\n              partialObject\n            );\n\n            splitObject(partialObject, itemPath, itemReference);\n          } else {\n            const itemReference = currentReference + pathSeparator + index;\n\n            splitObject(currentObject[index], itemPath, itemReference);\n          }\n        }\n      } else {\n        for (let propertyName in currentObject) {\n          const propertyPath = currentPath + pathSeparator + propertyName;\n          const propertyReference =\n            currentReference + pathSeparator + propertyName;\n          if (shouldSplit(propertyPath)) {\n            const partialObject = currentObject[propertyName];\n\n            currentObject[propertyName] = createReference(\n              propertyReference,\n              partialObject\n            );\n\n            splitObject(partialObject, propertyPath, propertyReference);\n          } else {\n            splitObject(\n              currentObject[propertyName],\n              propertyPath,\n              propertyReference\n            );\n          }\n        }\n      }\n    }\n  };\n\n  splitObject(object, '', '');\n  return partialObjects;\n};\n\n/**\n * Mutate the given object to recompose it from partial objects.\n * References to partial objects will be fetched as needed.\n *\n * @param object The object to be unsplit.\n * @param configuration Configuration to be used to unsplit the object.\n */\nexport const unsplit = (\n  object: Object,\n  {\n    isReferenceMagicPropertyName,\n    getReferencePartialObject,\n    maxUnsplitDepth,\n  }: UnsplitConfiguration\n): Promise<void> => {\n  const isReference = (object: Object): ?Reference => {\n    if (object[isReferenceMagicPropertyName] === true) {\n      return object;\n    }\n\n    return null;\n  };\n\n  const unsplitObject = (\n    currentObject: Object,\n    depth: number\n  ): Promise<void> => {\n    if (maxUnsplitDepth !== undefined && depth >= maxUnsplitDepth) {\n      return Promise.resolve();\n    }\n\n    if (currentObject !== null && typeof currentObject === 'object') {\n      const keys = Object.keys(currentObject);\n      if (keys) {\n        return Promise.all(\n          keys.map(indexOrPropertyName => {\n            const reference = isReference(currentObject[indexOrPropertyName]);\n            if (reference) {\n              return getReferencePartialObject(reference.referenceTo).then(\n                partialObject => {\n                  currentObject[indexOrPropertyName] = partialObject;\n\n                  return unsplitObject(\n                    currentObject[indexOrPropertyName],\n                    depth + 1\n                  );\n                }\n              );\n            }\n\n            return unsplitObject(currentObject[indexOrPropertyName], depth + 1);\n          })\n        ).then(() => {});\n      }\n    }\n\n    return Promise.resolve();\n  };\n\n  return unsplitObject(object, 0);\n};\n\n/**\n * A helper that can be used to split according to a list of hardcoded paths\n */\nexport const splitPaths = (paths: Set<string>) => {\n  return (path: string) => paths.has(path);\n};\n\n/**\n * A helper that can be used to get the name of items in array using an hardcoded property name.\n */\nexport const getNameFromProperty = (propertyName: string) => {\n  return (object: Object): string => {\n    const property = object[propertyName];\n    if (typeof property !== 'string') {\n      throw new Error(`Property ${propertyName} is not a string`);\n    }\n\n    return property;\n  };\n};\n\n/**\n * A helper that can be used to get the name of items in array using an hardcoded property name.\n */\nexport const getSlugifiedUniqueNameFromProperty = (propertyName: string) => {\n  const existingNamesForReference = {};\n\n  return (object: Object, currentReference: string): string => {\n    const property = object[propertyName];\n    if (typeof property !== 'string') {\n      throw new Error(`Property ${propertyName} is not a string`);\n    }\n\n    existingNamesForReference[currentReference] =\n      existingNamesForReference[currentReference] || {};\n    const newName = newNameGenerator(\n      slugs(property),\n      name => !!existingNamesForReference[currentReference][name]\n    );\n    existingNamesForReference[currentReference][newName] = true;\n    return newName;\n  };\n};\n","// @flow\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { type FileMetadata } from '../index';\nimport { unsplit } from '../../Utils/ObjectSplitter';\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\nconst remote = optionalRequire('@electron/remote');\nconst dialog = remote ? remote.dialog : null;\n\nconst readJSONFile = (filepath: string): Promise<Object> => {\n  if (!fs) return Promise.reject('Filesystem is not supported.');\n\n  return new Promise((resolve, reject) => {\n    fs.readFile(filepath, { encoding: 'utf8' }, (err, data) => {\n      if (err) return reject(err);\n\n      try {\n        const dataObject = JSON.parse(data);\n        return resolve(dataObject);\n      } catch (ex) {\n        return reject(filepath + ' is a corrupted/malformed file.');\n      }\n    });\n  });\n};\n\nexport const onOpenWithPicker = (): Promise<?FileMetadata> => {\n  if (!dialog) return Promise.reject('Not supported');\n  const browserWindow = remote.getCurrentWindow();\n\n  return dialog\n    .showOpenDialog(browserWindow, {\n      title: 'Open a project',\n      properties: ['openFile'],\n      message:\n        'If you want to open your GDevelop 4 project, be sure to save it as a .json file',\n      filters: [{ name: 'GDevelop 5 project', extensions: ['json'] }],\n    })\n    .then(({ filePaths }) => {\n      if (!filePaths || !filePaths.length) return null;\n      return { fileIdentifier: filePaths[0] };\n    });\n};\n\nexport const onOpen = (\n  fileMetadata: FileMetadata\n): Promise<{|\n  content: Object,\n|}> => {\n  const filePath = fileMetadata.fileIdentifier;\n  const projectPath = path.dirname(filePath);\n  return readJSONFile(filePath).then(object => {\n    return unsplit(object, {\n      getReferencePartialObject: referencePath => {\n        return readJSONFile(path.join(projectPath, referencePath) + '.json');\n      },\n      isReferenceMagicPropertyName: '__REFERENCE_TO_SPLIT_OBJECT',\n      // Limit unsplitting to depth 3 (which would allow properties of layouts/external layouts/external events\n      // to be un-splitted, but not the content of these properties), to avoid very slow processing\n      // of large game files.\n      maxUnsplitDepth: 3,\n    }).then(() => {\n      return { content: object };\n    });\n  });\n};\n\nexport const getAutoSaveCreationDate = async (\n  fileMetadata: FileMetadata,\n  compareLastModified: boolean\n): Promise<?number> => {\n  const filePath = fileMetadata.fileIdentifier;\n  const autoSavePath = filePath + '.autosave';\n  if (fs.existsSync(autoSavePath)) {\n    const autoSavedTime = fs.statSync(autoSavePath).mtime.getTime();\n    if (!compareLastModified) {\n      return autoSavedTime;\n    }\n    try {\n      const saveTime = fs.statSync(filePath).mtime.getTime();\n      // When comparing the last modified time, add a 5 seconds margin to avoid\n      // showing the warning if the user has just saved the project, or if the\n      // project has been decompressed from a zip file, causing the last modified\n      // time to be the time of decompression.\n      return autoSavedTime > saveTime + 5000 ? autoSavedTime : null;\n    } catch (err) {\n      console.error('Unable to compare *.autosave to project', err);\n      return null;\n    }\n  }\n  return null;\n};\n\nexport const onGetAutoSave = (fileMetadata: FileMetadata) => {\n  return Promise.resolve({\n    ...fileMetadata,\n    fileIdentifier: fileMetadata.fileIdentifier + '.autosave',\n  });\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { serializeToJSObject, serializeToJSON } from '../../Utils/Serializer';\nimport { type FileMetadata, type SaveAsLocation } from '../index';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport {\n  split,\n  splitPaths,\n  getSlugifiedUniqueNameFromProperty,\n} from '../../Utils/ObjectSplitter';\nimport type { MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport LocalFolderPicker from '../../UI/LocalFolderPicker';\n\nconst fs = optionalRequire('fs-extra');\nconst path = optionalRequire('path');\nconst remote = optionalRequire('@electron/remote');\nconst dialog = remote ? remote.dialog : null;\n\nexport const splittedProjectFolderNames = [\n  'layouts',\n  'externalLayouts',\n  'externalEvents',\n  'eventsFunctionsExtensions',\n];\n\nconst checkFileContent = (filePath: string, expectedContent: string) => {\n  const time = performance.now();\n  return new Promise((resolve, reject) => {\n    fs.readFile(filePath, { encoding: 'utf8' }, (err, content) => {\n      if (err) return reject(err);\n\n      if (content === '') {\n        reject(new Error(`Written file is empty, did the write fail?`));\n      }\n      if (content !== expectedContent) {\n        reject(\n          new Error(\n            `Written file is not containing the expected content, did the write fail?`\n          )\n        );\n      }\n      const verificationTime = performance.now() - time;\n      console.info(\n        `Verified ${filePath} content in ${verificationTime.toFixed()}ms.`\n      );\n      resolve();\n    });\n  });\n};\n\nconst writeAndCheckFile = async (\n  content: string,\n  filePath: string\n): Promise<void> => {\n  if (!fs) throw new Error('Filesystem is not supported.');\n  if (content === '')\n    throw new Error('The content to save on disk is empty. Aborting.');\n\n  await fs.ensureDir(path.dirname(filePath));\n\n  await fs.writeFile(filePath, content);\n  await checkFileContent(filePath, content);\n};\n\nconst writeAndCheckFormattedJSONFile = async (\n  object: Object,\n  filePath: string\n): Promise<void> => {\n  const content = JSON.stringify(object, null, 2);\n  await writeAndCheckFile(content, filePath);\n};\n\nconst writeProjectFiles = (\n  project: gdProject,\n  filePath: string,\n  projectPath: string\n): Promise<void> => {\n  const serializedProjectObject = serializeToJSObject(project);\n  if (project.isFolderProject()) {\n    const partialObjects = split(serializedProjectObject, {\n      pathSeparator: '/',\n      getArrayItemReferenceName: getSlugifiedUniqueNameFromProperty('name'),\n      shouldSplit: splitPaths(\n        new Set(\n          splittedProjectFolderNames.map(folderName => `/${folderName}/*`)\n        )\n      ),\n      isReferenceMagicPropertyName: '__REFERENCE_TO_SPLIT_OBJECT',\n    });\n\n    return Promise.all(\n      partialObjects.map(partialObject => {\n        return writeAndCheckFormattedJSONFile(\n          partialObject.object,\n          path.join(projectPath, partialObject.reference) + '.json'\n        ).catch(err => {\n          console.error('Unable to write a partial file:', err);\n          throw err;\n        });\n      })\n    ).then(() => {\n      return writeAndCheckFormattedJSONFile(\n        serializedProjectObject,\n        filePath\n      ).catch(err => {\n        console.error('Unable to write the split project:', err);\n        throw err;\n      });\n    });\n  } else {\n    return writeAndCheckFormattedJSONFile(\n      serializedProjectObject,\n      filePath\n    ).catch(err => {\n      console.error('Unable to write the project:', err);\n      throw err;\n    });\n  }\n};\n\nexport const onSaveProject = (\n  project: gdProject,\n  fileMetadata: FileMetadata\n): Promise<{|\n  wasSaved: boolean,\n  fileMetadata: FileMetadata,\n|}> => {\n  const filePath = fileMetadata.fileIdentifier;\n  const now = Date.now();\n  if (!filePath) {\n    return Promise.reject(\n      'Project file is empty, \"Save as\" should have been called?'\n    );\n  }\n  // Ensure we always pick the latest name and gameId.\n  const newFileMetadata = {\n    ...fileMetadata,\n    name: project.getName(),\n    gameId: project.getProjectUuid(),\n    lastModifiedDate: now,\n  };\n\n  const projectPath = path.dirname(filePath);\n  return writeProjectFiles(project, filePath, projectPath).then(() => {\n    return { wasSaved: true, fileMetadata: newFileMetadata }; // Save was properly done\n  });\n};\n\nexport const onChooseSaveProjectAsLocation = async ({\n  project,\n  fileMetadata,\n}: {|\n  project: gdProject,\n  fileMetadata: ?FileMetadata, // This is the current location.\n|}): Promise<{|\n  saveAsLocation: ?SaveAsLocation, // This is the newly chosen location (or null if cancelled).\n|}> => {\n  const defaultPath = fileMetadata ? fileMetadata.fileIdentifier : '';\n  const browserWindow = remote.getCurrentWindow();\n  const saveDialogOptions = {\n    defaultPath,\n    filters: [{ name: 'GDevelop 5 project', extensions: ['json'] }],\n  };\n\n  if (!dialog) {\n    throw new Error('Unsupported');\n  }\n  const filePath = dialog.showSaveDialogSync(browserWindow, saveDialogOptions);\n  if (!filePath) {\n    return { saveAsLocation: null };\n  }\n\n  return {\n    saveAsLocation: {\n      fileIdentifier: filePath,\n    },\n  };\n};\n\nexport const onSaveProjectAs = async (\n  project: gdProject,\n  saveAsLocation: ?SaveAsLocation,\n  options: {|\n    onStartSaving: () => void,\n    onMoveResources: ({|\n      newFileMetadata: FileMetadata,\n    |}) => Promise<void>,\n  |}\n): Promise<{|\n  wasSaved: boolean,\n  fileMetadata: ?FileMetadata,\n|}> => {\n  if (!saveAsLocation)\n    throw new Error('A location was not chosen before saving as.');\n  const filePath = saveAsLocation.fileIdentifier;\n  if (!filePath)\n    throw new Error('A file path was not chosen before saving as.');\n\n  options.onStartSaving();\n  // Ensure we always pick the latest name and gameId.\n  const newFileMetadata = {\n    fileIdentifier: filePath,\n    name: project.getName(),\n    gameId: project.getProjectUuid(),\n    lastModifiedDate: Date.now(),\n  };\n\n  // Move (copy or download, etc...) the resources first.\n  await options.onMoveResources({ newFileMetadata });\n\n  // Save the project when resources have been copied.\n  const projectPath = path.dirname(filePath);\n  project.setProjectFile(filePath);\n\n  await writeProjectFiles(project, filePath, projectPath);\n  return {\n    wasSaved: true,\n    fileMetadata: newFileMetadata,\n  };\n};\n\nexport const onAutoSaveProject = (\n  project: gdProject,\n  fileMetadata: FileMetadata\n): Promise<void> => {\n  const autoSavePath = fileMetadata.fileIdentifier + '.autosave';\n  return writeAndCheckFile(serializeToJSON(project), autoSavePath).catch(\n    err => {\n      console.error(`Unable to write ${autoSavePath}:`, err);\n      throw err;\n    }\n  );\n};\n\nexport const getWriteErrorMessage = (error: Error): MessageDescriptor =>\n  t`An error occurred when saving the project. Please try again by choosing another location.`;\n\n// See https://learn.microsoft.com/en-us/windows/win32/fileio/naming-a-file\nconst forbiddenCharacterRegex = /\\\\ | \\/ | : | \\* | \\? | \" | < | > | \\|/g;\nconst consecutiveSpacesRegex = /\\s+/g;\nconst cleanUpProjectFileName = (projectFileName: string) =>\n  (projectFileName.length > 200\n    ? projectFileName.substring(0, 200)\n    : projectFileName\n  )\n    .replace(forbiddenCharacterRegex, ' ')\n    .replace(consecutiveSpacesRegex, ' ')\n    .trim();\n\nexport const getProjectLocation = ({\n  projectName,\n  saveAsLocation,\n  newProjectsDefaultFolder,\n}: {\n  projectName: string,\n  saveAsLocation: ?SaveAsLocation,\n  newProjectsDefaultFolder?: string,\n}): SaveAsLocation => {\n  const outputPath = saveAsLocation\n    ? path.dirname(saveAsLocation.fileIdentifier)\n    : newProjectsDefaultFolder\n    ? newProjectsDefaultFolder\n    : '';\n  const projectFileName = projectName\n    ? cleanUpProjectFileName(projectName) + '.json'\n    : 'game.json';\n  return {\n    fileIdentifier: path.join(outputPath, projectFileName),\n  };\n};\n\nexport const renderNewProjectSaveAsLocationChooser = ({\n  projectName,\n  saveAsLocation,\n  setSaveAsLocation,\n  newProjectsDefaultFolder,\n}: {|\n  projectName: string,\n  saveAsLocation: ?SaveAsLocation,\n  setSaveAsLocation: (?SaveAsLocation) => void,\n  newProjectsDefaultFolder?: string,\n|}) => {\n  const projectLocation = getProjectLocation({\n    projectName,\n    saveAsLocation,\n    newProjectsDefaultFolder,\n  });\n  return (\n    <LocalFolderPicker\n      fullWidth\n      value={path.dirname(projectLocation.fileIdentifier)}\n      onChange={newOutputPath => {\n        const newOutputFileIdentifier = path.join(\n          newOutputPath,\n          path.basename(projectLocation.fileIdentifier)\n        );\n        setSaveAsLocation(\n          getProjectLocation({\n            projectName,\n            saveAsLocation: {\n              fileIdentifier: newOutputFileIdentifier,\n            },\n            newProjectsDefaultFolder,\n          })\n        );\n      }}\n      type=\"create-game\"\n    />\n  );\n};\n\nexport const isTryingToSaveInForbiddenPath = (filePath: string): boolean => {\n  if (!remote) return false; // This should not happen, but let's be safe.\n  // If the user is saving locally and chose the same location as where the\n  // executable is running, prevent this, as it will be deleted when the app is updated.\n  const exePath = remote.app.getPath('exe');\n  if (!exePath) return false; // This should not happen, but let's be safe.\n  const gdevelopDirectory = path.dirname(exePath);\n  return filePath.startsWith(gdevelopDirectory);\n};\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props} viewBox=\"0 0 16 16\" style={{ fill: 'none' }}>\n    <path\n      d=\"M5.75 11.25C5.75 11.25 6 14.25 4 15.25H12C10 14.25 10.25 11.25 10.25 11.25M5.75 11.25H13.25C14.3546 11.25 15.25 10.3546 15.25 9.25V2.75C15.25 1.64543 14.3546 0.75 13.25 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V9.25C0.75 10.3546 1.64543 11.25 2.75 11.25H5.75Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.5\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </SvgIcon>\n));\n","// @flow\n\nimport {\n  applyResourceDefaults,\n  getLocalResourceFullPath,\n  getResourceFilePathStatus,\n} from '../../ResourcesList/ResourceUtils';\nimport { mapVector } from '../../Utils/MapFor';\nimport newNameGenerator from '../../Utils/NewNameGenerator';\nimport optionalLazyRequire from '../../Utils/OptionalLazyRequire';\nimport optionalRequire from '../../Utils/OptionalRequire';\n\nconst gd: libGDevelop = global.gd;\n\nconst lazyRequireGlob = optionalLazyRequire('glob');\nconst path = optionalRequire('path');\n\n// It's important to use remote and not electron for folder actions,\n// otherwise they will be opened in the background.\n// See https://github.com/electron/electron/issues/4349#issuecomment-777475765\nconst remote = optionalRequire('@electron/remote');\n\nexport const locateResourceFile = ({\n  project,\n  resource,\n}: {|\n  project: gdProject,\n  resource: gdResource,\n|}) => {\n  const resourceFilePath = getLocalResourceFullPath(\n    project,\n    resource.getName()\n  );\n\n  remote.shell.showItemInFolder(path.resolve(resourceFilePath));\n};\n\nexport const openResourceFile = ({\n  project,\n  resource,\n}: {|\n  project: gdProject,\n  resource: gdResource,\n|}) => {\n  const resourceFilePath = getLocalResourceFullPath(\n    project,\n    resource.getName()\n  );\n  remote.shell.openPath(path.resolve(resourceFilePath));\n};\n\nexport const copyResourceFilePath = ({\n  project,\n  resource,\n}: {|\n  project: gdProject,\n  resource: gdResource,\n|}) => {\n  const resourceFilePath = getLocalResourceFullPath(\n    project,\n    resource.getName()\n  );\n  remote.clipboard.writeText(path.resolve(resourceFilePath));\n};\n\nexport const scanForNewResources = async ({\n  project,\n  extensions,\n  createResource,\n}: {|\n  project: gdProject,\n  extensions: Array<string>,\n  createResource: () => gdResource,\n|}) => {\n  const glob = lazyRequireGlob();\n  if (!glob) return;\n\n  const resourcesManager = project.getResourcesManager();\n  const projectPath = path.dirname(project.getProjectFile());\n\n  const allExtensions = [\n    ...extensions,\n    ...extensions.map(extension => extension.toUpperCase()),\n  ];\n\n  try {\n    const allFiles = await new Promise((resolve, reject) => {\n      glob(\n        projectPath + '/**/*.{' + allExtensions.join(',') + '}',\n        (error, files) => {\n          if (error) reject(error);\n          else resolve(files);\n        }\n      );\n    });\n\n    const filesToCheck = new gd.VectorString();\n    allFiles.forEach(filePath =>\n      filesToCheck.push_back(path.relative(projectPath, filePath))\n    );\n    const filePathsNotInResources = project\n      .getResourcesManager()\n      .findFilesNotInResources(filesToCheck);\n    filesToCheck.delete();\n\n    mapVector(filePathsNotInResources, (relativeFilePath: string) => {\n      const resourceName = newNameGenerator(relativeFilePath, name =>\n        resourcesManager.hasResource(name)\n      );\n\n      const resource = createResource();\n      resource.setFile(relativeFilePath);\n      resource.setName(resourceName);\n      applyResourceDefaults(project, resource);\n      resourcesManager.addResource(resource);\n      resource.delete();\n\n      console.info(\n        `\"${relativeFilePath}\" added to project as resource named \"${resourceName}\".`\n      );\n    });\n  } catch (error) {\n    console.error(`Error finding files inside ${projectPath}:`, error);\n    return;\n  }\n};\n\nexport const removeAllResourcesWithInvalidPath = ({\n  project,\n}: {|\n  project: gdProject,\n|}) => {\n  const resourcesManager = project.getResourcesManager();\n  const removedResourceNames = resourcesManager\n    .getAllResourceNames()\n    .toJSArray()\n    .filter(resourceName => {\n      return getResourceFilePathStatus(project, resourceName) === 'error';\n    });\n\n  removedResourceNames.forEach(resourceName => {\n    resourcesManager.removeResource(resourceName);\n    console.info('Removed due to invalid path: ' + resourceName);\n  });\n};\n","// @flow\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport debounce from 'lodash/debounce';\nimport wrap from 'lodash/wrap';\nimport memoize from 'lodash/memoize';\nimport { splittedProjectFolderNames } from './LocalProjectWriter';\n\nconst path = optionalRequire('path');\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\nexport const setupResourcesWatcher =\n  ipcRenderer && path\n    ? ({\n        fileIdentifier,\n        callback,\n        options,\n      }: {\n        fileIdentifier: string,\n        callback: ({| identifier: string |}) => void,\n        options?: {| isProjectSplitInMultipleFiles: boolean |},\n      }) => {\n        // We can't just debounce the whole callback, it has to be done file-wise,\n        // otherwise we would miss all the debounced calls but the last one.\n        // See https://stackoverflow.com/questions/28787436/debounce-a-function-with-argument\n        const debouncedCallback = wrap(\n          memoize(() =>\n            debounce(\n              filePath => {\n                const relativePath = path\n                  .relative(folderPath, filePath)\n                  .replace(/\\\\/g, '/');\n\n                callback({ identifier: relativePath });\n              },\n              200,\n              { leading: false, trailing: true }\n            )\n          ),\n          (getMemoizedFunc, obj) => getMemoizedFunc(obj)(obj)\n        );\n        const folderPath = path.dirname(fileIdentifier);\n        const gameFile = path.basename(fileIdentifier);\n        const autosaveFile = gameFile + '.autosave';\n        ipcRenderer.on('project-file-changed', (event, path) => {\n          // TODO: Is it safe to let it like that since the OS could for some reason\n          // do never-ending operations on the folder or its children, making the debounce\n          // never ending.\n          debouncedCallback(path);\n        });\n        const ignore = [\n          '**/.DS_Store', // macOS folder attributes file\n          '**/.git/**', // For projects using git as a versioning tool.\n          path.join(folderPath, gameFile),\n          path.join(folderPath, autosaveFile),\n        ];\n        if (options && options.isProjectSplitInMultipleFiles) {\n          ignore.push(\n            ...splittedProjectFolderNames.map(folderName =>\n              path.join(folderPath, folderName, '*.json')\n            )\n          );\n        }\n        const subscriptionIdPromise = ipcRenderer.invoke(\n          'local-filesystem-watcher-setup',\n          folderPath,\n          JSON.stringify({\n            ignore,\n          })\n        );\n\n        return () => {\n          ipcRenderer.removeAllListeners('project-file-changed');\n          subscriptionIdPromise.then(subscriptionId => {\n            ipcRenderer.invoke(\n              'local-filesystem-watcher-disable',\n              subscriptionId\n            );\n          });\n        };\n      }\n    : undefined;\n","// @flow\nimport * as React from 'react';\nimport { Trans, t } from '@lingui/macro';\nimport { type StorageProvider, type FileMetadata } from '../index';\nimport {\n  onOpenWithPicker,\n  onOpen,\n  getAutoSaveCreationDate,\n  onGetAutoSave,\n} from './LocalProjectOpener';\nimport {\n  onSaveProject,\n  onChooseSaveProjectAsLocation,\n  onSaveProjectAs,\n  onAutoSaveProject,\n  getWriteErrorMessage,\n  renderNewProjectSaveAsLocationChooser,\n  getProjectLocation,\n  isTryingToSaveInForbiddenPath,\n} from './LocalProjectWriter';\nimport {\n  type AppArguments,\n  POSITIONAL_ARGUMENTS_KEY,\n} from '../../Utils/Window';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport Computer from '../../UI/CustomSvgIcons/Computer';\nimport {\n  copyResourceFilePath,\n  locateResourceFile,\n  openResourceFile,\n  removeAllResourcesWithInvalidPath,\n  scanForNewResources,\n} from './LocalProjectResourcesHandler';\nimport { allResourceKindsAndMetadata } from '../../ResourcesList/ResourceSource';\nimport {\n  type ShowAlertFunction,\n  type ShowConfirmFunction,\n} from '../../UI/Alert/AlertContext';\nimport { setupResourcesWatcher } from './LocalFileResourcesWatcher';\n\n/**\n * Use the Electron APIs to provide access to the native\n * file system (with native save/open dialogs).\n */\nexport default ({\n  internalName: 'LocalFile',\n  name: t`Your computer`,\n  renderIcon: props => <Computer fontSize={props.size} />,\n  getFileMetadataFromAppArguments: (appArguments: AppArguments) => {\n    if (!appArguments[POSITIONAL_ARGUMENTS_KEY]) return null;\n    if (!appArguments[POSITIONAL_ARGUMENTS_KEY].length) return null;\n\n    return {\n      fileIdentifier: appArguments[POSITIONAL_ARGUMENTS_KEY][0],\n    };\n  },\n  getProjectLocation: getProjectLocation,\n  renderNewProjectSaveAsLocationChooser: renderNewProjectSaveAsLocationChooser,\n  setupResourcesWatcher,\n  createOperations: () => ({\n    onOpenWithPicker,\n    onOpen,\n    getAutoSaveCreationDate,\n    onSaveProject,\n    onChooseSaveProjectAsLocation,\n    onSaveProjectAs,\n    onAutoSaveProject,\n    onGetAutoSave,\n    getOpenErrorMessage: (error: Error): MessageDescriptor => {\n      return t`Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorization to open it.`;\n    },\n    getWriteErrorMessage,\n    canFileMetadataBeSafelySaved: async (\n      fileMetadata: FileMetadata,\n      actions: {|\n        showAlert: ShowAlertFunction,\n        showConfirmation: ShowConfirmFunction,\n      |}\n    ) => {\n      const path = fileMetadata.fileIdentifier;\n      if (isTryingToSaveInForbiddenPath(path)) {\n        await actions.showAlert({\n          title: t`Choose another location`,\n          message: t`Your project is saved in the same folder as the application. This folder will be deleted when the application is updated. Please choose another location if you don't want to lose your project.`,\n        });\n      }\n\n      // We don't block the save, in case the user wants to save anyway.\n      return true;\n    },\n    canFileMetadataBeSafelySavedAs: async (\n      fileMetadata: FileMetadata,\n      actions: {|\n        showAlert: ShowAlertFunction,\n        showConfirmation: ShowConfirmFunction,\n      |}\n    ) => {\n      const path = fileMetadata.fileIdentifier;\n      if (isTryingToSaveInForbiddenPath(path)) {\n        await actions.showAlert({\n          title: t`Choose another location`,\n          message: t`Your project is saved in the same folder as the application. This folder will be deleted when the application is updated. Please choose another location if you don't want to lose your project.`,\n        });\n\n        // We block the save as we don't want new projects to be saved there.\n        return false;\n      }\n\n      return true;\n    },\n  }),\n  createResourceOperations: () => ({\n    project,\n    resource,\n    i18n,\n    updateInterface,\n    cleanUserSelectionOfResources,\n    informUser,\n  }) => [\n    {\n      label: i18n._(t`Locate file`),\n      click: () => locateResourceFile({ project, resource }),\n    },\n    {\n      label: i18n._(t`Open file`),\n      click: () => openResourceFile({ project, resource }),\n    },\n    {\n      label: i18n._(t`Copy file path`),\n      click: () => {\n        copyResourceFilePath({ project, resource });\n        informUser({\n          message: <Trans>Resource file path copied to clipboard</Trans>,\n        });\n      },\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Scan in the project folder for...`),\n      submenu: allResourceKindsAndMetadata.map(\n        ({ displayName, fileExtensions, createNewResource }) => ({\n          label: i18n._(displayName),\n          click: async () => {\n            await scanForNewResources({\n              project,\n              extensions: fileExtensions,\n              createResource: createNewResource,\n            });\n            updateInterface();\n          },\n        })\n      ),\n    },\n    {\n      label: i18n._(t`Remove resources with invalid path`),\n      click: () => {\n        removeAllResourcesWithInvalidPath({ project });\n        // Remove user selection in case the user selected a resource\n        // that was just removed.\n        cleanUserSelectionOfResources();\n        // Force update of the resources list as otherwise it could render\n        // resources that were just deleted.\n        updateInterface();\n      },\n    },\n  ],\n}: StorageProvider);\n","// @flow\nimport * as React from 'react';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\n/**\n * Set up some watchers for GDJS and Extensions sources.\n * Stop the watchers when the component is unmounted or `shouldWatch` prop is false.\n */\nexport const LocalGDJSDevelopmentWatcher = () => {\n  const preferences = React.useContext(PreferencesContext);\n  const shouldWatch = preferences.values.useGDJSDevelopmentWatcher;\n\n  React.useEffect(\n    () => {\n      if (!shouldWatch) {\n        // Nothing to set up in the effect if watch is deactivated.\n        return;\n      }\n\n      if (!ipcRenderer) {\n        console.error(\n          'Unable to find ipcRenderer to set up GDJS development watchers'\n        );\n        return;\n      }\n\n      ipcRenderer.send('setup-local-gdjs-development-watcher');\n      return () => {\n        ipcRenderer.send('close-local-gdjs-development-watcher');\n      };\n    },\n    [shouldWatch]\n  );\n\n  return null;\n};\n","// @flow\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport PromisePool from '@supercharge/promise-pool';\nimport { retryIfFailed } from '../../Utils/RetryIfFailed';\nimport newNameGenerator from '../../Utils/NewNameGenerator';\nimport { type FileMetadata } from '../index';\nimport {\n  extractDecodedFilenameWithExtensionFromProductAuthorizedUrl,\n  fetchTokenForPrivateGameTemplateAuthorizationIfNeeded,\n  isPrivateGameTemplateResourceAuthorizedUrl,\n  isProductAuthorizedResourceUrl,\n} from '../../Utils/GDevelopServices/Shop';\nimport {\n  extractDecodedFilenameWithExtensionFromPublicAssetResourceUrl,\n  isPublicAssetResourceUrl,\n} from '../../Utils/GDevelopServices/Asset';\nimport {\n  isBlobURL,\n  isURL,\n  parseLocalFilePathOrExtensionFromMetadata,\n} from '../../ResourcesList/ResourceUtils';\nimport { sanitizeFilename } from '../../Utils/Filename';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { extractDecodedFilenameFromProjectResourceUrl } from '../../Utils/GDevelopServices/Project';\nimport axios from 'axios';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\nconst fs = optionalRequire('fs-extra');\nconst path = optionalRequire('path');\n\ntype Options = {|\n  project: gdProject,\n  fileMetadata: FileMetadata,\n  onProgress: (number, number) => void,\n  authenticatedUser: AuthenticatedUser,\n|};\n\nconst generateUnusedFilepath = (\n  basePath: string,\n  alreadyUsedFilePaths: Set<string>,\n  filename: string\n) => {\n  const extension = path.extname(filename);\n  const filenameWithoutExtension = path.basename(filename, extension);\n  const name = newNameGenerator(filenameWithoutExtension, name => {\n    const tentativePath = path.join(basePath, name) + extension;\n    return (\n      fs.existsSync(tentativePath) || alreadyUsedFilePaths.has(tentativePath)\n    );\n  });\n  return path.join(basePath, name) + extension;\n};\n\nconst downloadBlobToLocalFile = async (\n  blobUrl: string,\n  filePath: string\n): Promise<void> => {\n  if (!ipcRenderer) throw new Error('Not supported');\n\n  const response = await axios.get(blobUrl, {\n    responseType: 'arraybuffer',\n  });\n  const arrayBuffer = response.data;\n\n  await ipcRenderer.invoke(\n    'local-file-save-from-arraybuffer',\n    arrayBuffer,\n    filePath\n  );\n};\n\n// This mover can be used for both public URLs and Cloud project resources.\nexport const moveUrlResourcesToLocalFiles = async ({\n  project,\n  fileMetadata,\n  onProgress,\n  authenticatedUser,\n}: Options) => {\n  if (!fs || !ipcRenderer) throw new Error('Unsupported');\n\n  // Get all resources to download.\n  const resourcesManager = project.getResourcesManager();\n  const allResourceNames = resourcesManager.getAllResourceNames().toJSArray();\n  const resourcesToFetchNames = allResourceNames.filter(resourceName => {\n    const resource = resourcesManager.getResource(resourceName);\n    const resourceFile = resource.getFile();\n    return isURL(resourceFile);\n  });\n  const tokenForPrivateGameTemplateAuthorization = await fetchTokenForPrivateGameTemplateAuthorizationIfNeeded(\n    {\n      authenticatedUser,\n      allResourcePaths: resourcesToFetchNames.map(resourceName => {\n        const resource = resourcesManager.getResource(resourceName);\n        return resource.getFile();\n      }),\n    }\n  );\n\n  const projectPath = path.dirname(fileMetadata.fileIdentifier);\n  const baseAssetsPath = path.join(projectPath, 'assets');\n  const downloadedFilePaths = new Set<string>();\n  const erroredResources = [];\n\n  let fetchedResourcesCount = 0;\n\n  await PromisePool.withConcurrency(50)\n    .for(resourcesToFetchNames) // It's important not to loop on allResourceNames, as calling the onProgress can be costly on the UI.\n    .process(async resourceName => {\n      const resource = resourcesManager.getResource(resourceName);\n\n      const resourceFile = resource.getFile();\n      if (isURL(resourceFile)) {\n        if (isBlobURL(resourceFile)) {\n          try {\n            const {\n              localFilePath,\n              extension,\n            } = parseLocalFilePathOrExtensionFromMetadata(resource);\n            const downloadedFilePath = localFilePath\n              ? path.resolve(projectPath, localFilePath)\n              : generateUnusedFilepath(\n                  baseAssetsPath,\n                  downloadedFilePaths,\n                  sanitizeFilename(resource.getName() + (extension || ''))\n                );\n\n            await fs.ensureDir(baseAssetsPath);\n            await downloadBlobToLocalFile(resourceFile, downloadedFilePath);\n            resource.setFile(\n              path.relative(projectPath, downloadedFilePath).replace(/\\\\/g, '/')\n            );\n          } catch (error) {\n            erroredResources.push({ resourceName, error });\n          }\n        } else {\n          let filename;\n          if (isProductAuthorizedResourceUrl(resourceFile)) {\n            // Resource is coming from a private asset or private game template.\n            filename = extractDecodedFilenameWithExtensionFromProductAuthorizedUrl(\n              resourceFile\n            );\n          } else if (isPublicAssetResourceUrl(resourceFile)) {\n            // Resource is coming from a public asset.\n            filename = extractDecodedFilenameWithExtensionFromPublicAssetResourceUrl(\n              resourceFile\n            );\n          } else {\n            // Resource is a project resource or a generic url.\n            filename = extractDecodedFilenameFromProjectResourceUrl(\n              resourceFile\n            );\n          }\n\n          // Find a new file for the resource to download.\n          const downloadedFilePath = generateUnusedFilepath(\n            baseAssetsPath,\n            downloadedFilePaths,\n            filename\n          );\n          downloadedFilePaths.add(downloadedFilePath);\n\n          try {\n            await retryIfFailed({ times: 2 }, async () => {\n              await fs.ensureDir(baseAssetsPath);\n              const resourceUrl = new URL(resourceFile);\n              if (\n                isPrivateGameTemplateResourceAuthorizedUrl(resourceUrl.href) &&\n                tokenForPrivateGameTemplateAuthorization\n              ) {\n                resourceUrl.searchParams.set(\n                  'token',\n                  tokenForPrivateGameTemplateAuthorization\n                );\n              }\n              const encodedUrl = resourceUrl.href; // Encode the URL to support special characters in file names.\n              await ipcRenderer.invoke(\n                'local-file-download',\n                encodedUrl,\n                downloadedFilePath\n              );\n              resource.setFile(\n                path\n                  .relative(projectPath, downloadedFilePath)\n                  .replace(/\\\\/g, '/')\n              );\n            });\n          } catch (error) {\n            erroredResources.push({ resourceName, error });\n          }\n        }\n      }\n\n      onProgress(fetchedResourcesCount++, resourcesToFetchNames.length);\n    });\n\n  return {\n    erroredResources,\n  };\n};\n","// @flow\n\nexport const processByChunk = async <Item, MappedItem>(\n  array: Array<Item>,\n  {\n    transformItem,\n    isChunkTooBig,\n    processChunk,\n  }: {|\n    transformItem: Item => Promise<MappedItem>,\n    isChunkTooBig: (MappedItem[]) => boolean,\n    processChunk: (MappedItem[]) => Promise<void>,\n  |}\n): Promise<void> => {\n  let currentItemIndex = 0;\n  const nextChunk: Array<MappedItem> = [];\n\n  while (currentItemIndex < array.length) {\n    const mappedItem = await transformItem(array[currentItemIndex]);\n\n    if (!nextChunk.length) {\n      // Existing chunk is empty - let the new item be added to it.\n    } else {\n      if (!isChunkTooBig([...nextChunk, mappedItem])) {\n        // Item can be added to the existing chunk - let's add it.\n      } else {\n        // Item can't be added to the existing chunk - process the existing chunk\n        await processChunk(nextChunk);\n        nextChunk.length = 0;\n      }\n    }\n\n    nextChunk.push(mappedItem);\n    currentItemIndex++;\n  }\n\n  if (nextChunk.length) {\n    await processChunk(nextChunk);\n    nextChunk.length = 0;\n  }\n\n  return;\n};\n","// @flow\r\nimport optionalRequire from './OptionalRequire';\r\nconst path = optionalRequire('path');\r\nconst fs = optionalRequire('fs');\r\n\r\nconst readLocalFileToArrayBuffer = async (\r\n  filePath: string\r\n): Promise<ArrayBuffer> => {\r\n  const buffer: Buffer = await new Promise((resolve, reject) => {\r\n    fs.readFile(filePath, function(err, buffer) {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n\r\n      resolve(buffer);\r\n    });\r\n  });\r\n\r\n  // See https://stackoverflow.com/questions/8609289/convert-a-binary-nodejs-buffer-to-javascript-arraybuffer:\r\n  // The slice and offset stuff is required because small Buffers (less than 4 kB by default, half the pool size)\r\n  // can be views on a shared ArrayBuffer. Without slicing, you can end up with an ArrayBuffer containing data from another Buffer.\r\n  const arrayBuffer = buffer.buffer.slice(\r\n    buffer.byteOffset,\r\n    buffer.byteOffset + buffer.byteLength\r\n  );\r\n  return arrayBuffer;\r\n};\r\n\r\n// See https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types.\r\nconst extensionToMimeType = {\r\n  // Common audio extensions:\r\n  aac: 'audio/aac',\r\n  wav: 'audio/wav',\r\n  mp3: 'audio/mp3',\r\n  ogg: 'audio/ogg',\r\n\r\n  // Common image extensions:\r\n  png: 'image/png',\r\n  jpg: 'image/jpeg',\r\n  jpeg: 'image/jpeg',\r\n  webp: 'image/webp',\r\n\r\n  // Common font extensions:\r\n  ttf: 'font/ttf',\r\n  otf: 'font/otf',\r\n\r\n  // Common video extensions:\r\n  mp4: 'video/mp4',\r\n  webm: 'video/webm',\r\n\r\n  // Other common extensions:\r\n  json: 'application/json',\r\n  xml: 'application/xml',\r\n  gz: 'application/gzip',\r\n  js: 'application/javascript',\r\n};\r\n\r\nexport const readLocalFileToFile = async (filePath: string): Promise<File> => {\r\n  const arrayBuffer = await readLocalFileToArrayBuffer(filePath);\r\n  const extensionWithoutLeadingDot = path.extname(filePath).replace(/^\\./, '');\r\n  return new File([arrayBuffer], path.basename(filePath), {\r\n    type:\r\n      extensionToMimeType[extensionWithoutLeadingDot] ||\r\n      'application/octet-stream',\r\n  });\r\n};\r\n","// @flow\nimport {\n  type MoveAllProjectResourcesOptions,\n  type MoveAllProjectResourcesResult,\n  type MoveAllProjectResourcesFunction,\n} from './index';\nimport LocalFileStorageProvider from '../LocalFileStorageProvider';\nimport { moveUrlResourcesToLocalFiles } from '../LocalFileStorageProvider/LocalFileResourceMover';\nimport UrlStorageProvider from '../UrlStorageProvider';\nimport CloudStorageProvider from '../CloudStorageProvider';\nimport LocalFileSystem from '../../ExportAndShare/LocalExporters/LocalFileSystem';\nimport assignIn from 'lodash/assignIn';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { moveUrlResourcesToCloudProject } from '../CloudStorageProvider/CloudResourceMover';\nimport { checkIfIsGDevelopCloudBucketUrl } from '../../Utils/CrossOrigin';\nimport {\n  getCredentialsForCloudProject,\n  uploadProjectResourceFiles,\n  type UploadedProjectResourceFiles,\n} from '../../Utils/GDevelopServices/Project';\nimport { processByChunk } from '../../Utils/ProcessByChunk';\nimport { readLocalFileToFile } from '../../Utils/LocalFileUploader';\nimport { isURL, isBlobURL } from '../../ResourcesList/ResourceUtils';\nconst path = optionalRequire('path');\n\nconst gd: libGDevelop = global.gd;\n\ntype ResourceAndFile = {|\n  resource: gdResource,\n  file: File,\n|};\n\nexport const moveAllLocalResourcesToCloudResources = async ({\n  project,\n  authenticatedUser,\n  oldFileMetadata,\n  newFileMetadata,\n  onProgress,\n}: MoveAllProjectResourcesOptions): Promise<MoveAllProjectResourcesResult> => {\n  const result: MoveAllProjectResourcesResult = {\n    erroredResources: [],\n  };\n\n  const newCloudProjectId = newFileMetadata.fileIdentifier;\n\n  const resourcesManager = project.getResourcesManager();\n\n  /**\n   * Find the local resources that must be\n   * uploaded into the new project.\n   */\n  const getResourcesToUpload = (project: gdProject): Array<gdResource> => {\n    const allResourceNames = resourcesManager.getAllResourceNames().toJSArray();\n    return allResourceNames\n      .map(\n        (resourceName: string): ?gdResource => {\n          const resource = resourcesManager.getResource(resourceName);\n          const resourceFile = resource.getFile();\n\n          if (isURL(resourceFile)) {\n            if (checkIfIsGDevelopCloudBucketUrl(resourceFile)) {\n              // URL from a cloud project: this is unlikely and would not work\n              // (as the project is a local project). Still, ignore this.\n              return null;\n            } else if (isBlobURL(resourceFile)) {\n              result.erroredResources.push({\n                resourceName: resource.getName(),\n                error: new Error('Unsupported blob URL.'),\n              });\n              return null;\n            } else {\n              // Public URL resource: nothing to do.\n              return null;\n            }\n          } else {\n            // Local resource to be downloaded.\n            return resource;\n          }\n        }\n      )\n      .filter(Boolean);\n  };\n\n  const allResourcesToUpload = getResourcesToUpload(project);\n\n  const projectPath = path.dirname(oldFileMetadata.fileIdentifier);\n\n  let alreadyDoneCount = 0;\n  // Read all files as Files.\n  await processByChunk(allResourcesToUpload, {\n    transformItem: async (resource): Promise<ResourceAndFile | null> => {\n      const resourceAbsolutePath = path.resolve(\n        projectPath,\n        resource.getFile()\n      );\n\n      try {\n        const file = await readLocalFileToFile(resourceAbsolutePath);\n        return {\n          resource,\n          file,\n        };\n      } catch (error) {\n        result.erroredResources.push({\n          resourceName: resource.getName(),\n          error: new Error(\n            `Unable to open the file (${resourceAbsolutePath}).`\n          ),\n        });\n        return null;\n      }\n    },\n    isChunkTooBig: (resourceAndFilesChunk: Array<ResourceAndFile | null>) => {\n      if (resourceAndFilesChunk.length > 70) return true;\n\n      const allBufferSize = resourceAndFilesChunk\n        .filter(Boolean)\n        .reduce((size, { file }) => size + file.size, 0);\n\n      // Stop a chunk when more than 150MB are read to be uploaded. This is\n      // to avoid loading all resources in memory at once. This don't give an exact\n      // guarantee on the upper bound (a single file could be more than 150MB), but\n      // this limits the risks of running out of memory.\n      return allBufferSize > 150 * 1000 * 1000;\n    },\n    processChunk: async (\n      resourceAndFilesChunk: Array<ResourceAndFile | null>\n    ) => {\n      const resourceAndFilesToUpload: ResourceAndFile[] = resourceAndFilesChunk.filter(\n        Boolean\n      );\n\n      // Upload the files just read, for the new project.\n      await getCredentialsForCloudProject(authenticatedUser, newCloudProjectId);\n      const uploadedProjectResourceFiles: UploadedProjectResourceFiles = await uploadProjectResourceFiles(\n        authenticatedUser,\n        newCloudProjectId,\n        resourceAndFilesToUpload.map(({ file }) => file),\n        (count, total) => {\n          onProgress(alreadyDoneCount + count, allResourcesToUpload.length);\n        }\n      );\n      alreadyDoneCount += resourceAndFilesChunk.length;\n\n      // Update resources with the newly created URLs.\n      uploadedProjectResourceFiles.forEach(({ url, error }, index) => {\n        const resource = resourceAndFilesToUpload[index].resource;\n        if (error || !url) {\n          result.erroredResources.push({\n            resourceName: resource.getName(),\n            error: error || new Error('Unknown error during upload.'),\n          });\n          return;\n        }\n\n        resource.setFile(url);\n      });\n    },\n  });\n\n  return result;\n};\n\nconst movers: {\n  [string]: MoveAllProjectResourcesFunction,\n} = {\n  [`${LocalFileStorageProvider.internalName}=>${\n    LocalFileStorageProvider.internalName\n  }`]: async ({ project, newFileMetadata }: MoveAllProjectResourcesOptions) => {\n    // TODO: Ideally, errors while copying resources should be reported.\n    // TODO: Report progress.\n    const projectPath = path.dirname(newFileMetadata.fileIdentifier);\n    const fileSystem = assignIn(\n      new gd.AbstractFileSystemJS(),\n      new LocalFileSystem()\n    );\n    gd.ProjectResourcesCopier.copyAllResourcesTo(\n      project,\n      // $FlowFixMe - fileSystem is a gdAbstractFileSystem, despite the assignIn.\n      fileSystem,\n      projectPath,\n      true, // Update the project with the new resource paths\n      false, // Don't move absolute files\n      true // Keep relative files folders structure.\n    );\n    return {\n      erroredResources: [],\n    };\n  },\n  // When saving a Cloud project locally, all resources are downloaded (including\n  // the ones on GDevelop Cloud or private game templates).\n  [`${CloudStorageProvider.internalName}=>${\n    LocalFileStorageProvider.internalName\n  }`]: ({ project, newFileMetadata, onProgress, authenticatedUser }) =>\n    moveUrlResourcesToLocalFiles({\n      project,\n      fileMetadata: newFileMetadata,\n      onProgress,\n      authenticatedUser,\n    }),\n  // On the desktop app, try to download all URLs into local files, put\n  // next to the project file (in a \"assets\" directory). This is helpful\n  // to continue working on a game started on the web-app (using public URLs\n  // for resources).\n  // This is also helpful to download private game templates resources so that\n  // the game can be opened offline.\n  [`${UrlStorageProvider.internalName}=>${\n    LocalFileStorageProvider.internalName\n  }`]: ({ project, newFileMetadata, onProgress, authenticatedUser }) =>\n    moveUrlResourcesToLocalFiles({\n      project,\n      fileMetadata: newFileMetadata,\n      onProgress,\n      authenticatedUser,\n    }),\n\n  // Moving to GDevelop \"Cloud\" storage:\n\n  // From a local project to a Cloud project, all resources are uploaded.\n  [`${LocalFileStorageProvider.internalName}=>${\n    CloudStorageProvider.internalName\n  }`]: moveAllLocalResourcesToCloudResources,\n  // From a Cloud project to another, resources need to be copied\n  // (unless they are public URLs).\n  [`${CloudStorageProvider.internalName}=>${\n    CloudStorageProvider.internalName\n  }`]: moveUrlResourcesToCloudProject,\n  // Nothing to move around when going from a project on a public URL\n  // to a cloud project (we could offer an option one day though to download\n  // and upload the URL resources on GDevelop Cloud).\n  [`${UrlStorageProvider.internalName}=>${\n    CloudStorageProvider.internalName\n  }`]: moveUrlResourcesToCloudProject,\n};\n\nconst LocalResourceMover = {\n  moveAllProjectResources: async (\n    options: MoveAllProjectResourcesOptions\n  ): Promise<MoveAllProjectResourcesResult> => {\n    const { oldStorageProvider, newStorageProvider } = options;\n    const mover =\n      movers[\n        `${oldStorageProvider.internalName}=>${newStorageProvider.internalName}`\n      ];\n    if (!mover)\n      throw new Error(\n        `Can't find a ResourceMover for ${oldStorageProvider.internalName} to ${\n          newStorageProvider.internalName\n        }.`\n      );\n\n    return mover(options);\n  },\n};\n\nexport default LocalResourceMover;\n","// @flow\nimport {\n  type ResourceFetcher,\n  type FetchAllProjectResourcesOptions,\n  type FetchAllProjectResourcesResult,\n  type FetchAllProjectResourcesFunction,\n} from './index';\nimport LocalFileStorageProvider from '../LocalFileStorageProvider';\nimport { moveUrlResourcesToLocalFiles } from '../LocalFileStorageProvider/LocalFileResourceMover';\nimport UrlStorageProvider from '../UrlStorageProvider';\nimport CloudStorageProvider from '../CloudStorageProvider';\nimport { fetchRelativeResourcesToFullUrls } from '../UrlStorageProvider/UrlResourceFetcher';\nimport { moveUrlResourcesToCloudFilesIfPrivate } from '../CloudStorageProvider/CloudResourceFetcher';\n\nconst fetchers: {\n  [string]: FetchAllProjectResourcesFunction,\n} = {\n  // The Cloud file storage provider fetches the resources that are\n  // private URLs by downloading them and reuploading them to the cloud.\n  [CloudStorageProvider.internalName]: moveUrlResourcesToCloudFilesIfPrivate,\n  // The local file storage provider fetches the resources that are URLs\n  // by downloading them locally.\n  [LocalFileStorageProvider.internalName]: moveUrlResourcesToLocalFiles,\n  // The URL storage consider relative resources to be relative to the project\n  // URL. This allows to open local projects uploaded to GitHub for example.\n  [UrlStorageProvider.internalName]: fetchRelativeResourcesToFullUrls,\n};\n\nconst LocalResourceFetcher: ResourceFetcher = {\n  fetchAllProjectResources: async (\n    options: FetchAllProjectResourcesOptions\n  ): Promise<FetchAllProjectResourcesResult> => {\n    const { storageProvider } = options;\n    const fetcher = fetchers[storageProvider.internalName];\n    if (!fetcher)\n      throw new Error(\n        `Can't find a ResourceFetcher for ${\n          storageProvider.internalName\n        } - have you registered the storage provider here?`\n      );\n\n    return fetcher(options);\n  },\n};\n\nexport default LocalResourceFetcher;\n","// @flow\nimport {\n  signInWithEmailAndPassword,\n  type Auth,\n  signInWithCredential,\n  GoogleAuthProvider,\n  OAuthProvider,\n  GithubAuthProvider,\n} from 'firebase/auth';\nimport type { LoginProvider, FirebaseBasedLoginProvider } from '.';\nimport type { IdentityProvider } from '../Utils/GDevelopServices/Authentication';\nimport {\n  setupAuthenticationWebSocket,\n  terminateWebSocket,\n} from '../Utils/GDevelopServices/Authorization';\nimport Window from '../Utils/Window';\nimport { UserCancellationError } from './Utils';\n\nconst isDev = Window.isDev();\n\nconst authenticationPortalUrl = 'https://auth.gdevelop.io';\n\nclass LocalLoginProvider implements LoginProvider, FirebaseBasedLoginProvider {\n  auth: Auth;\n  constructor(auth: Auth) {\n    this.auth = auth;\n  }\n\n  async loginWithEmailAndPassword({\n    email,\n    password,\n  }: {|\n    email: string,\n    password: string,\n  |}) {\n    try {\n      await signInWithEmailAndPassword(this.auth, email, password);\n      // The user is now stored in `this.auth`.\n    } catch (error) {\n      console.error('Error while login:', error);\n      throw error;\n    }\n  }\n\n  async loginOrSignupWithProvider({\n    provider,\n    signal,\n  }: {|\n    provider: IdentityProvider,\n    signal?: AbortSignal,\n  |}) {\n    if (signal && signal.aborted) {\n      return Promise.reject(\n        new UserCancellationError(\n          'Login or Signup with provider already aborted.'\n        )\n      );\n    }\n    const promise = new Promise((resolve, reject) => {\n      // Listen for abort event on signal\n      if (signal) {\n        signal.addEventListener('abort', () => {\n          terminateWebSocket();\n          reject(\n            new UserCancellationError(\n              'Login or Signup with provider already aborted.'\n            )\n          );\n        });\n      }\n      setupAuthenticationWebSocket({\n        onConnectionEstablished: connectionId => {\n          if (signal && signal.aborted) return;\n          const url = new URL(authenticationPortalUrl);\n          url.searchParams.set('connection-id', connectionId);\n          url.searchParams.set('provider', provider);\n          url.searchParams.set('env', isDev ? 'dev' : 'live');\n          Window.openExternalURL(url.toString());\n        },\n        onTokenReceived: async ({\n          provider,\n          data,\n        }: {|\n          provider: 'apple' | 'google' | 'github',\n          data: any,\n        |}) => {\n          if (signal && signal.aborted) return;\n          try {\n            const credential =\n              provider === 'google'\n                ? GoogleAuthProvider.credential(data.credential)\n                : provider === 'github'\n                ? GithubAuthProvider.credential(data.accessToken)\n                : new OAuthProvider('apple.com').credential({\n                    idToken: data.id_token,\n                    // Typescript types declaration indicates the parameter `rawNonce` should be\n                    // set but it only works with `nonce`.\n                    nonce: data.raw_nonce,\n                  });\n            await signInWithCredential(this.auth, credential);\n            resolve();\n            terminateWebSocket();\n          } catch (error) {\n            console.error(\n              `An error occurred while logging in with ${provider} token:`,\n              error\n            );\n            reject(error);\n          }\n        },\n        onError: error => {\n          if (signal && signal.aborted) return;\n          terminateWebSocket();\n          console.error(\n            'An error occurred while setting up authentication web socket:',\n            error\n          );\n          reject(\n            new Error(\n              'An error occurred while setting up authentication web socket.'\n            )\n          );\n        },\n        onTimeout: () => {\n          if (signal && signal.aborted) return;\n          terminateWebSocket();\n          console.error('Connection to authorization websocket timed out.');\n          reject(new Error('Connection to authorization websocket timed out.'));\n        },\n      });\n    });\n    return promise;\n  }\n}\n\nexport default LocalLoginProvider;\n","// @flow\nimport React from 'react';\nimport MainFrame from './MainFrame';\nimport Window from './Utils/Window';\nimport ShareDialog from './ExportAndShare/ShareDialog';\nimport Authentication from './Utils/GDevelopServices/Authentication';\nimport './UI/icomoon-font.css'; // Styles for Icomoon font.\n\n// Import for Electron powered IDE.\nimport localResourceSources from './ResourcesList/LocalResourceSources';\nimport localResourceExternalEditors from './ResourcesList/LocalResourceExternalEditors';\nimport LocalPreviewLauncher from './ExportAndShare/LocalExporters/LocalPreviewLauncher';\nimport {\n  localAutomatedExporters,\n  localManualExporters,\n  localOnlineWebExporter,\n} from './ExportAndShare/LocalExporters';\nimport ElectronMainMenu from './MainFrame/ElectronMainMenu';\nimport makeExtensionsLoader from './JsExtensionsLoader/LocalJsExtensionsLoader';\nimport { makeLocalEventsFunctionCodeWriter } from './EventsFunctionsExtensionsLoader/CodeWriters/LocalEventsFunctionCodeWriter';\nimport ObjectsEditorService from './ObjectEditor/ObjectsEditorService';\nimport ObjectsRenderingService from './ObjectsRendering/ObjectsRenderingService';\nimport Providers from './MainFrame/Providers';\nimport LocalEventsFunctionsExtensionWriter from './EventsFunctionsExtensionsLoader/Storage/LocalEventsFunctionsExtensionWriter';\nimport LocalEventsFunctionsExtensionOpener from './EventsFunctionsExtensionsLoader/Storage/LocalEventsFunctionsExtensionOpener';\nimport ProjectStorageProviders from './ProjectsStorage/ProjectStorageProviders';\nimport LocalFileStorageProvider from './ProjectsStorage/LocalFileStorageProvider';\nimport { LocalGDJSDevelopmentWatcher } from './GameEngineFinder/LocalGDJSDevelopmentWatcher';\nimport CloudStorageProvider from './ProjectsStorage/CloudStorageProvider';\nimport UrlStorageProvider from './ProjectsStorage/UrlStorageProvider';\nimport LocalResourceMover from './ProjectsStorage/ResourceMover/LocalResourceMover';\nimport LocalResourceFetcher from './ProjectsStorage/ResourceFetcher/LocalResourceFetcher';\nimport LocalLoginProvider from './LoginProvider/LocalLoginProvider';\n\nconst gd: libGDevelop = global.gd;\n\nexport const create = (authentication: Authentication) => {\n  Window.setUpContextMenu();\n  const loginProvider = new LocalLoginProvider(authentication.auth);\n  authentication.setLoginProvider(loginProvider);\n\n  const appArguments = Window.getArguments();\n  const isDev = Window.isDev();\n\n  return (\n    <Providers\n      authentication={authentication}\n      disableCheckForUpdates={!!appArguments['disable-update-check']}\n      makeEventsFunctionCodeWriter={makeLocalEventsFunctionCodeWriter}\n      eventsFunctionsExtensionWriter={LocalEventsFunctionsExtensionWriter}\n      eventsFunctionsExtensionOpener={LocalEventsFunctionsExtensionOpener}\n    >\n      {({ i18n }) => (\n        <ProjectStorageProviders\n          appArguments={appArguments}\n          storageProviders={[\n            LocalFileStorageProvider,\n            UrlStorageProvider,\n            CloudStorageProvider,\n          ]}\n          defaultStorageProvider={LocalFileStorageProvider}\n        >\n          {({\n            getStorageProviderOperations,\n            getStorageProviderResourceOperations,\n            storageProviders,\n            initialFileMetadataToOpen,\n            getStorageProvider,\n          }) => (\n            <MainFrame\n              i18n={i18n}\n              renderMainMenu={(props, callbacks, extraCallbacks) => (\n                <ElectronMainMenu\n                  props={props}\n                  callbacks={callbacks}\n                  extraCallbacks={extraCallbacks}\n                />\n              )}\n              renderPreviewLauncher={(props, ref) => (\n                <LocalPreviewLauncher {...props} ref={ref} />\n              )}\n              renderShareDialog={props => (\n                <ShareDialog\n                  project={props.project}\n                  onSaveProject={props.onSaveProject}\n                  isSavingProject={props.isSavingProject}\n                  onChangeSubscription={props.onChangeSubscription}\n                  onClose={props.onClose}\n                  automatedExporters={localAutomatedExporters}\n                  manualExporters={localManualExporters}\n                  onlineWebExporter={localOnlineWebExporter}\n                  fileMetadata={props.fileMetadata}\n                  storageProvider={props.storageProvider}\n                  initialTab={props.initialTab}\n                />\n              )}\n              renderGDJSDevelopmentWatcher={\n                isDev ? () => <LocalGDJSDevelopmentWatcher /> : null\n              }\n              storageProviders={storageProviders}\n              resourceMover={LocalResourceMover}\n              resourceFetcher={LocalResourceFetcher}\n              getStorageProviderOperations={getStorageProviderOperations}\n              getStorageProviderResourceOperations={\n                getStorageProviderResourceOperations\n              }\n              getStorageProvider={getStorageProvider}\n              resourceSources={localResourceSources}\n              resourceExternalEditors={localResourceExternalEditors}\n              extensionsLoader={makeExtensionsLoader({\n                gd,\n                objectsEditorService: ObjectsEditorService,\n                objectsRenderingService: ObjectsRenderingService,\n                filterExamples: !isDev,\n              })}\n              initialFileMetadataToOpen={initialFileMetadataToOpen}\n            />\n          )}\n        </ProjectStorageProviders>\n      )}\n    </Providers>\n  );\n};\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @constructor\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__dir__ = 1;\n  this.__filtered__ = false;\n  this.__iteratees__ = [];\n  this.__takeCount__ = MAX_ARRAY_LENGTH;\n  this.__views__ = [];\n}\n\n// Ensure `LazyWrapper` is an instance of `baseLodash`.\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nmodule.exports = LazyWrapper;\n","var baseCreate = require('./_baseCreate'),\n    baseLodash = require('./_baseLodash');\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable explicit method chain sequences.\n */\nfunction LodashWrapper(value, chainAll) {\n  this.__wrapped__ = value;\n  this.__actions__ = [];\n  this.__chain__ = !!chainAll;\n  this.__index__ = 0;\n  this.__values__ = undefined;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nmodule.exports = LodashWrapper;\n","/**\n * The function whose prototype chain sequence wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nmodule.exports = baseLodash;\n","var identity = require('./identity'),\n    metaMap = require('./_metaMap');\n\n/**\n * The base implementation of `setData` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nmodule.exports = baseSetData;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nmodule.exports = composeArgs;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\nmodule.exports = composeArgsRight;\n","/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      ++result;\n    }\n  }\n  return result;\n}\n\nmodule.exports = countHolders;\n","var createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\nmodule.exports = createBind;\n","var baseCreate = require('./_baseCreate'),\n    isObject = require('./isObject');\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nmodule.exports = createCtor;\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    createHybrid = require('./_createHybrid'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createCurry;\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    countHolders = require('./_countHolders'),\n    createCtor = require('./_createCtor'),\n    createRecurry = require('./_createRecurry'),\n    getHolder = require('./_getHolder'),\n    reorder = require('./_reorder'),\n    replaceHolders = require('./_replaceHolders'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_ARY_FLAG = 128,\n    WRAP_FLIP_FLAG = 512;\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & WRAP_ARY_FLAG,\n      isBind = bitmask & WRAP_BIND_FLAG,\n      isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n      isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n      isFlip = bitmask & WRAP_FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(\n        func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createHybrid;\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createPartial;\n","var isLaziable = require('./_isLaziable'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & WRAP_CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n  if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n    bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n  }\n  var newData = [\n    func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n    newHoldersRight, argPos, ary, arity\n  ];\n\n  var result = wrapFunc.apply(undefined, newData);\n  if (isLaziable(func)) {\n    setData(result, newData);\n  }\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n\nmodule.exports = createRecurry;\n","var baseSetData = require('./_baseSetData'),\n    createBind = require('./_createBind'),\n    createCurry = require('./_createCurry'),\n    createHybrid = require('./_createHybrid'),\n    createPartial = require('./_createPartial'),\n    getData = require('./_getData'),\n    mergeData = require('./_mergeData'),\n    setData = require('./_setData'),\n    setWrapToString = require('./_setWrapToString'),\n    toInteger = require('./toInteger');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *    1 - `_.bind`\n *    2 - `_.bindKey`\n *    4 - `_.curry` or `_.curryRight` of a bound function\n *    8 - `_.curry`\n *   16 - `_.curryRight`\n *   32 - `_.partial`\n *   64 - `_.partialRight`\n *  128 - `_.rearg`\n *  256 - `_.ary`\n *  512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n  var data = isBindKey ? undefined : getData(func);\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  if (data) {\n    mergeData(newData, data);\n  }\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] === undefined\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setWrapToString(setter(result, newData), func, bitmask);\n}\n\nmodule.exports = createWrap;\n","var metaMap = require('./_metaMap'),\n    noop = require('./noop');\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nmodule.exports = getData;\n","var realNames = require('./_realNames');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = (func.name + ''),\n      array = realNames[result],\n      length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nmodule.exports = getFuncName;\n","/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\nmodule.exports = getHolder;\n","/** Used to match wrap detail comments. */\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n\nmodule.exports = getWrapDetails;\n","/** Used to match wrap detail comments. */\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\n\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\nfunction insertWrapDetails(source, details) {\n  var length = details.length;\n  if (!length) {\n    return source;\n  }\n  var lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n\nmodule.exports = insertWrapDetails;\n","var LazyWrapper = require('./_LazyWrapper'),\n    getData = require('./_getData'),\n    getFuncName = require('./_getFuncName'),\n    lodash = require('./wrapperLodash');\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n *  else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func),\n      other = lodash[funcName];\n\n  if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nmodule.exports = isLaziable;\n","var composeArgs = require('./_composeArgs'),\n    composeArgsRight = require('./_composeArgsRight'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_BOUND_FLAG = 4,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers used to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and\n * `_.rearg` modify function arguments, making the order in which they are\n * executed important, preventing the merging of metadata. However, we make\n * an exception for a safe combined case where curried functions have `_.ary`\n * and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n  var isCombo =\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n    ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n    ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & WRAP_BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = value;\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & WRAP_ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nmodule.exports = mergeData;\n","var WeakMap = require('./_WeakMap');\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nmodule.exports = metaMap;\n","/** Used to lookup unminified function names. */\nvar realNames = {};\n\nmodule.exports = realNames;\n","var copyArray = require('./_copyArray'),\n    isIndex = require('./_isIndex');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nmodule.exports = reorder;\n","/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\nmodule.exports = replaceHolders;\n","var baseSetData = require('./_baseSetData'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity\n * function to avoid garbage collection pauses in V8. See\n * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = shortOut(baseSetData);\n\nmodule.exports = setData;\n","var getWrapDetails = require('./_getWrapDetails'),\n    insertWrapDetails = require('./_insertWrapDetails'),\n    setToString = require('./_setToString'),\n    updateWrapDetails = require('./_updateWrapDetails');\n\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\nfunction setWrapToString(wrapper, reference, bitmask) {\n  var source = (reference + '');\n  return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n}\n\nmodule.exports = setWrapToString;\n","var arrayEach = require('./_arrayEach'),\n    arrayIncludes = require('./_arrayIncludes');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_BIND_KEY_FLAG = 2,\n    WRAP_CURRY_FLAG = 8,\n    WRAP_CURRY_RIGHT_FLAG = 16,\n    WRAP_PARTIAL_FLAG = 32,\n    WRAP_PARTIAL_RIGHT_FLAG = 64,\n    WRAP_ARY_FLAG = 128,\n    WRAP_REARG_FLAG = 256,\n    WRAP_FLIP_FLAG = 512;\n\n/** Used to associate wrap methods with their bit flags. */\nvar wrapFlags = [\n  ['ary', WRAP_ARY_FLAG],\n  ['bind', WRAP_BIND_FLAG],\n  ['bindKey', WRAP_BIND_KEY_FLAG],\n  ['curry', WRAP_CURRY_FLAG],\n  ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n  ['flip', WRAP_FLIP_FLAG],\n  ['partial', WRAP_PARTIAL_FLAG],\n  ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n  ['rearg', WRAP_REARG_FLAG]\n];\n\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function(pair) {\n    var value = '_.' + pair[0];\n    if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n\nmodule.exports = updateWrapDetails;\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    copyArray = require('./_copyArray');\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  if (wrapper instanceof LazyWrapper) {\n    return wrapper.clone();\n  }\n  var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n  result.__actions__ = copyArray(wrapper.__actions__);\n  result.__index__  = wrapper.__index__;\n  result.__values__ = wrapper.__values__;\n  return result;\n}\n\nmodule.exports = wrapperClone;\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with `partials` prepended to the\n * arguments it receives. This method is like `_.bind` except it does **not**\n * alter the `this` binding.\n *\n * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n * builds, may be used as a placeholder for partially applied arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of partially\n * applied functions.\n *\n * @static\n * @memberOf _\n * @since 0.2.0\n * @category Function\n * @param {Function} func The function to partially apply arguments to.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new partially applied function.\n * @example\n *\n * function greet(greeting, name) {\n *   return greeting + ' ' + name;\n * }\n *\n * var sayHelloTo = _.partial(greet, 'hello');\n * sayHelloTo('fred');\n * // => 'hello fred'\n *\n * // Partially applied with placeholders.\n * var greetFred = _.partial(greet, _, 'fred');\n * greetFred('hi');\n * // => 'hi fred'\n */\nvar partial = baseRest(function(func, partials) {\n  var holders = replaceHolders(partials, getHolder(partial));\n  return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n});\n\n// Assign default placeholders.\npartial.placeholder = {};\n\nmodule.exports = partial;\n","var castFunction = require('./_castFunction'),\n    partial = require('./partial');\n\n/**\n * Creates a function that provides `value` to `wrapper` as its first\n * argument. Any additional arguments provided to the function are appended\n * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n * binding of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {*} value The value to wrap.\n * @param {Function} [wrapper=identity] The wrapper function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var p = _.wrap(_.escape, function(func, text) {\n *   return '<p>' + func(text) + '</p>';\n * });\n *\n * p('fred, barney, & pebbles');\n * // => '<p>fred, barney, &amp; pebbles</p>'\n */\nfunction wrap(value, wrapper) {\n  return partial(castFunction(wrapper), value);\n}\n\nmodule.exports = wrap;\n","var LazyWrapper = require('./_LazyWrapper'),\n    LodashWrapper = require('./_LodashWrapper'),\n    baseLodash = require('./_baseLodash'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike'),\n    wrapperClone = require('./_wrapperClone');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit method\n * chain sequences. Methods that operate on and return arrays, collections,\n * and functions can be chained together. Methods that retrieve a single value\n * or may return a primitive value will automatically end the chain sequence\n * and return the unwrapped value. Otherwise, the value must be unwrapped\n * with `_#value`.\n *\n * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n * enabled using `_.chain`.\n *\n * The execution of chained methods is lazy, that is, it's deferred until\n * `_#value` is implicitly or explicitly called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion.\n * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n * the creation of intermediate arrays and can greatly reduce the number of\n * iteratee executions. Sections of a chain sequence qualify for shortcut\n * fusion if the section is applied to an array and iteratees accept only\n * one argument. The heuristic for whether a section qualifies for shortcut\n * fusion is subject to change.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n * `zipObject`, `zipObjectDeep`, and `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n * `upperFirst`, `value`, and `words`\n *\n * @name _\n * @constructor\n * @category Seq\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // Returns an unwrapped value.\n * wrapped.reduce(_.add);\n * // => 6\n *\n * // Returns a wrapped value.\n * var squares = wrapped.map(square);\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\nlodash.prototype.constructor = lodash;\n\nmodule.exports = lodash;\n"],"names":["findGDJS","require","optionalRequire","path","fs","module","exports","findJsExtensionModules","_ref","filterExamples","onFindGDJS","then","_ref2","gdjsRoot","extensionsRoot","join","console","info","concat","Promise","resolve","reject","readdir","error","extensionFolders","filteredExtensionFolders","filter","folder","indexOf","all","map","extensionFolder","extensionFolderPath","jsExtensionModulePath","stat","err","stats","isFile","modulePaths","modulePath","loadExtension","gd","objectsEditorService","objectsRenderingService","loadAllExtensions","_","extensionModulePaths","extensionModulePath","extensionModule","rethrowException","ex","result","message","rawError","registerEditorConfigurations","registerInstanceRenderers","registerClearCache","JsPlatform","get","copyAllEmbeddedResourcesToProjectFolder","_x","_x2","_copyAllEmbeddedResourcesToProjectFolder","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","project","filesWithEmbeddedResources","projectPath","copies","_iterator3","_step3","_step3$value","hasAnyEmbeddedResourceOutsideProjectFolder","embeddedResources","_iterator4","_step4","_loop","wrap","_context2","prev","next","abrupt","dirname","getProjectFile","_createForOfIteratorHelper","values","s","n","done","value","embedded","resourceBasename","fileExtension","fileNameWithoutExtension","newFileNameWithoutExtension","resourceNewPath","_context","isOutsideProjectFolder","basename","fullPath","extname","newNameGenerator","tentativeFileName","tentativePath","existsSync","resourceName","push","promises","copyFile","stop","delegateYield","t0","t1","e","f","finish","t2","createAndMapEmbeddedResources","_step","filesWithMappedResources","Map","_iterator","_step2","_step$value","_slicedToArray","filePath","mapping","_iterator2","_step2$value","resourceKind","relPath","relative","theEmbeddedResource","createNewResource","setName","setFile","has","mappedResources","setMetadata","JSON","stringify","embeddedResourcesMapping","delete","getResourcesManager","addResource","set","listTileMapEmbeddedResources","_x3","_x4","_listTileMapEmbeddedResources","_callee2","data","tileMap","dir","_iterator5","_step5","tileset","resource","_iterator6","_step6","level","_relPath","_fullPath","_isOutsideProjectFolder","_resource","_context3","readFile","sent","parse","__header__","app","defs","tilesets","isPathInProjectFolder","levels","bgRelPath","_listSpineEmbeddedResources","_callee3","atlasPath","atlasFileName","_context4","replace","access","constants","F_OK","catch","_listSpineTextureAtlasEmbeddedResources","_callee4","atlasContent","atlasImageRegex","imageDependencies","_iterator7","_step7","relatedImagePath","_context5","match","embeddedResourcesParsers","tilemap","json","spine","_x5","_x6","atlas","_x7","_x8","remote","dialog","ResourceStoreChooser","options","onChooseResources","_jsx","ResourceStore","onChoose","chosenResourceUrl","url","newResource","setOrigin","localResourceSources","_toConsumableArray","allResourceKindsAndMetadata","kind","fileExtensions","displayName","selectLocalFileResources","_ref4","_ref3","i18n","getLastUsedPath","setLastUsedPath","resourcesImporationBehavior","properties","latestPath","browserWindow","_yield$dialog$showOpe","filePaths","lastUsedPath","hasFilesOutsideProjectFolder","parseEmbeddedResources","recursivelyParseEmbeddedResources","newToOldFilePaths","Error","multiSelection","getCurrentWindow","showOpenDialog","title","id","filters","name","extensions","defaultPath","length","some","_ref5","initialEmbeddedResources","initialEmbeddedResource","embeddedResourseParser","newDependentResources","Window","showConfirmDialog","copyAllToProjectFolder","filePathWithMapping","displayTab","onlyForStorageProvider","selectResourcesHeadless","renderComponent","props","Line","justifyContent","children","RaisedButton","primary","label","Trans","onClick","resources","fileMetadata","getStorageProvider","_ref7","FileToCloudProjectResourceUploader","automaticallyOpenInput","automaticallyOpenIfPossible","_ref8","electron","ipcRenderer","openAndWaitForExternalEditorWindow","editorName","externalEditorInput","externalEditorOutput","invoke","downloadAndPrepareExternalEditorBase64Resources","resourceNames","urlsToDownload","filesToRead","resourcesManager","downloadedBlobs","resourcesToDataUrl","forEach","hasResource","getResource","getFile","isURL","isBlobURL","localFilePath","downloadUrlsToBlobs","urlContainers","onProgress","count","total","blob","item","convertBlobToDataURL","t3","dataUrl","call","t4","_ref6","content","toString","resourceData","editWithLocalExternalEditor","_ref9","_callee5","externalEditorName","defaultName","metadataKey","resourceManagementProps","modifiedResources","singleFrame","extraOptions","externalEditorData","readMetadata","existingMetadata","fps","isLooping","sendExternalEditorOpened","saveBlobUrlsFromExternalEditorBase64Resources","baseNameForNewResources","onFetchNewlyAddedResources","freeBlobsAndUpdateMetadata","metadata","patchExternalEditorMetadataWithResourcesNamesIfNecessary","_ref10","getName","_ref11","originalIndex","newName","newMetadata","_defineProperty","editors","createDisplayName","editDisplayName","edit","_edit","_callee6","_context6","_edit2","_callee7","_context7","_edit3","_callee8","_context8","_x9","os","getUID","userInfo","uid","global","pathPosix","posix","LocalFileSystem","_createClass","_this","_classCallCheck","_filesToDownload","getAllUrlFilesIn","pathPrefix","normalizedPathPrefix","normalize","Object","keys","mkDir","mkdirsSync","dirExists","clearDir","emptyDirSync","getTempDir","tmpdir","fileNameFrom","_downloadUrlsToLocalFiles","dirNameFrom","makeAbsolute","filename","baseDirectory","isAbsolute","makeRelative","charAt","source","dest","copySync","writeToFile","file","contents","outputFileSync","readFileSync","readDir","ext","toUpperCase","output","VectorString","readdirSync","push_back","fileExists","normalizedFilePath","statSync","this","downloadUrlsToLocalFiles","open","onExport","onClose","onRunPreviewLocally","isMobile","useResponsiveWindowSize","urlWithProtocol","_jsxs","Dialog","actions","FlatButton","secondaryActions","onRequestClose","maxWidth","Text","PlaceholderLoader","ShareLink","_Fragment","QrCode","size","debuggerServerState","debuggerServerAddress","callbacksList","debuggerIds","localPreviewDebuggerServer","startServer","serverStartPromise","serverStartPromiseCompleted","removeAllListeners","on","event","onErrorReceived","debuggerIdIndex","splice","onConnectionClosed","onConnectionOpened","errorMessage","onConnectionErrored","address","onServerStateChanged","parsedMessage","onHandleParsedMessage","warn","send","serverStartTimeoutPromise","setTimeout","race","sendMessage","getServerState","getExistingDebuggerIds","registerCallbacks","callbacks","callbacksIndex","LocalPreviewLauncher","_React$Component","_inherits","_super","_createSuper","_len","args","Array","_key","canDoNetworkPreview","canDoHotReload","state","networkPreviewDialogOpen","networkPreviewHost","networkPreviewPort","networkPreviewError","previewGamePath","previewBrowserWindowOptions","hotReloadsCount","hideMenuBar","alwaysOnTop","_networkPreviewSubscriptionChecker","_hotReloadSubscriptionChecker","_openPreviewBrowserWindow","_this$state","previewGameIndexHtmlPath","closePreview","windowId","_openPreviewWindow","gamePath","setState","width","getGameResolutionWidth","height","getGameResolutionHeight","useContentSize","backgroundColor","webPreferences","webSecurity","nodeIntegration","contextIsolation","getIsMenuBarHiddenInPreview","getIsAlwaysOnTopInPreview","networkPreview","serverParams","port","_checkSubscriptionForNetworkPreview","ipAddress","root","_prepareExporter","localFileSystem","fileSystem","assignIn","AbstractFileSystemJS","outputDir","exporter","Exporter","launchPreview","previewOptions","layout","externalLayout","getPreviewDebuggerServer","fn","onResult","performance","now","timeFunction","previewExportOptions","PreviewExportOptions","setIsDevelopmentEnvironment","isDev","setLayoutName","setExternalLayoutName","previewDebuggerServerAddress","useWebsocketDebuggerClientWithServerAddress","includeFileHashs","getIncludeFileHashs","includeFile","hash","setIncludeFileHash","setElectronRemoteRequirePath","shouldHotReload","hotReload","setProjectDataOnlyExport","projectDataOnlyExport","setFullLoadingScreen","fullLoadingScreen","fallbackAuthor","setFallbackAuthor","username","exportProjectForPixiPreview","debuggerId","command","checkUserHasSubscription","time","key","_this2","_this$state2","React","SubscriptionChecker","ref","subscriptionChecker","onChangeSubscription","mode","LocalNetworkPreviewDialog","shell","exportPipelineName","localCordovaExportPipeline","packageNameWarningType","getInitialExportState","getLastCompilationDirectory","canLaunchBuild","exportState","isNavigationDisabled","renderHeader","updateExportState","exportStep","Column","noMargin","ExplanationHeader","LocalFolderPicker","type","onChange","setLastCompilationDirectory","fullWidth","renderExportFlow","ExportFlow","_objectSpread","prepareExporter","context","launchExport","_launchExport","exportOptions","ExportOptions","setTarget","exportWholePixiProject","urlFiles","launchResourcesDownload","_launchResourcesDownload","updateStepProgress","throwIfAnyError","launchCompression","exportOutput","renderDoneFooter","openExportFolder","openPath","DoneFooter","renderGameButton","localElectronExportPipeline","expand","localHTML5ExportPipeline","renderTutorial","DismissableTutorialMessage","tutorialId","styles","container","position","display","alignItems","button","marginLeft","textField","flex","onChooseFolder","_yield$dialog$showSav","showSaveDialog","style","undefined","TextField","margin","translatableHintText","optionalLazyRequire","moduleName","moduleLoaded","lazyRequireArchiver","archiveLocalFolder","outputFilename","sizeLimit","archiver","createWriteStream","archive","zlib","fileSize","pointer","log","roundFileSizeInMb","Math","round","pipe","directory","finalize","localFacebookInstantGamesExportPipeline","archiveOutputFilename","getPath","LocalFilePicker","temporaryOutputDir","uploadLocalFile","uploadOptions","stepCurrentProgress","stepMaxProgress","localOnlineCordovaExportPipeline","onlineBuildType","limitedBuilds","targets","keystore","signingDialogOpen","errored","includes","SetupExportHeader","shouldSuggestBumpingVersionNumber","archiveOutputDir","launchUpload","outputFile","getBuildFileUploadOptions","launchOnlineBuild","authenticatedUser","uploadBucketKey","gameId","payWithCredits","getAuthorizationHeader","firebaseUser","buildCordovaAndroid","localOnlineCordovaIosExportPipeline","signing","profile","buildCordovaIos","localOnlineElectronExportPipeline","buildElectron","localOnlineWebExportPipeline","OnlineWebExportFlow","buildWeb","localOnlineWebExporter","onlineWebExporter","exportPipeline","localAutomatedExporters","html5Exporter","onlineCordovaExporter","onlineCordovaIosExporter","onlineElectronExporter","facebookInstantGamesExporter","localManualExporters","cordovaExporter","electronExporter","useIPCEventListener","ipcEvent","callback","shouldApply","handler","eventArgs","removeListener","useAppEventListener","_len2","_key2","isMainWindow","windowTitle","lowercaseTitle","toLowerCase","startsWith","extraCallbacks","canSaveProjectAs","recentProjectFiles","shortcutMap","isApplicationTopLevelMenu","onClosePreview","language","_React$useState","_React$useState2","isFocusedOnMainWindow","setIsFocusedOnMainWindow","_React$useState3","_React$useState4","focusedWindowId","setFocusedWindowId","closePreviewWindow","useShortcutToClosePreviewWindow","PreferencesContext","window","onChooseProject","onOpenRecentFile","onSaveProject","onSaveProjectAs","onShowVersionHistory","onCloseProject","onCloseApp","onExportProject","onInviteCollaborators","onCreateProject","onCreateBlank","onOpenProjectManager","onOpenHomePage","onOpenDebugger","onOpenAbout","onOpenPreferences","onOpenLanguage","onOpenProfile","setElectronUpdateStatus","buildMainMenuDeclarativeTemplate","useCommandWithOptions","generateOptions","text","fileIdentifier","makeLocalEventsFunctionCodeWriter","onWriteFile","mkdir","code","getPathFor","codeNamespace","slugs","getIncludeFileFor","writeFunctionCode","functionCodeNamespace","writeFile","writeBehaviorCode","behaviorCodeNamespace","writeObjectCode","objectCodeNamespace","LocalEventsFunctionsExtensionWriter","chooseEventsFunctionExtensionFile","extensionName","writeEventsFunctionsExtension","extension","filepath","object","ensureDir","stringifyException","writeJSONFile","serializeToJSObject","LocalEventsFunctionsExtensionOpener","readEventsFunctionExtensionFile","encoding","dataObject","readJSONFile","unsplit","isReferenceMagicPropertyName","getReferencePartialObject","maxUnsplitDepth","unsplitObject","currentObject","depth","indexOrPropertyName","reference","isReference","referenceTo","partialObject","getSlugifiedUniqueNameFromProperty","propertyName","existingNamesForReference","currentReference","property","onOpenWithPicker","onOpen","referencePath","getAutoSaveCreationDate","compareLastModified","autoSavePath","autoSavedTime","saveTime","mtime","getTime","onGetAutoSave","splittedProjectFolderNames","checkFileContent","expectedContent","verificationTime","toFixed","writeAndCheckFile","writeAndCheckFormattedJSONFile","writeProjectFiles","paths","serializedProjectObject","isFolderProject","partialObjects","pathSeparator","getArrayItemReferenceName","shouldSplit","createReference","splitObject","currentPath","isArray","index","itemPath","itemReference","propertyPath","propertyReference","split","Set","folderName","Date","newFileMetadata","getProjectUuid","lastModifiedDate","wasSaved","onChooseSaveProjectAsLocation","saveDialogOptions","showSaveDialogSync","saveAsLocation","onStartSaving","onMoveResources","setProjectFile","onAutoSaveProject","serializeToJSON","getWriteErrorMessage","forbiddenCharacterRegex","consecutiveSpacesRegex","getProjectLocation","projectName","newProjectsDefaultFolder","outputPath","projectFileName","substring","trim","cleanUpProjectFileName","isTryingToSaveInForbiddenPath","exePath","gdevelopDirectory","SvgIcon","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","lazyRequireGlob","scanForNewResources","createResource","glob","allExtensions","allFiles","filesToCheck","filePathsNotInResources","files","findFilesNotInResources","mapVector","relativeFilePath","applyResourceDefaults","setupResourcesWatcher","debouncedCallback","memoize","debounce","relativePath","folderPath","identifier","leading","trailing","getMemoizedFunc","obj","gameFile","autosaveFile","ignore","isProjectSplitInMultipleFiles","subscriptionIdPromise","subscriptionId","internalName","renderIcon","Computer","fontSize","getFileMetadataFromAppArguments","appArguments","POSITIONAL_ARGUMENTS_KEY","renderNewProjectSaveAsLocationChooser","setSaveAsLocation","projectLocation","newOutputPath","newOutputFileIdentifier","createOperations","getOpenErrorMessage","canFileMetadataBeSafelySaved","_canFileMetadataBeSafelySaved","showAlert","canFileMetadataBeSafelySavedAs","_canFileMetadataBeSafelySavedAs","createResourceOperations","updateInterface","cleanUserSelectionOfResources","informUser","click","resourceFilePath","getLocalResourceFullPath","showItemInFolder","locateResourceFile","openResourceFile","clipboard","writeText","copyResourceFilePath","submenu","_click","getAllResourceNames","toJSArray","getResourceFilePathStatus","removeResource","removeAllResourcesWithInvalidPath","LocalGDJSDevelopmentWatcher","shouldWatch","useGDJSDevelopmentWatcher","generateUnusedFilepath","basePath","alreadyUsedFilePaths","filenameWithoutExtension","downloadBlobToLocalFile","blobUrl","response","arrayBuffer","axios","responseType","moveUrlResourcesToLocalFiles","allResourceNames","resourcesToFetchNames","tokenForPrivateGameTemplateAuthorization","baseAssetsPath","downloadedFilePaths","erroredResources","fetchedResourcesCount","resourceFile","fetchTokenForPrivateGameTemplateAuthorizationIfNeeded","allResourcePaths","PromisePool","for","process","_parseLocalFilePathOr","downloadedFilePath","_downloadedFilePath","parseLocalFilePathOrExtensionFromMetadata","sanitizeFilename","isProductAuthorizedResourceUrl","extractDecodedFilenameWithExtensionFromProductAuthorizedUrl","isPublicAssetResourceUrl","extractDecodedFilenameWithExtensionFromPublicAssetResourceUrl","extractDecodedFilenameFromProjectResourceUrl","add","retryIfFailed","times","resourceUrl","encodedUrl","URL","isPrivateGameTemplateResourceAuthorizedUrl","href","searchParams","processByChunk","array","transformItem","isChunkTooBig","processChunk","currentItemIndex","nextChunk","mappedItem","readLocalFileToArrayBuffer","buffer","slice","byteOffset","byteLength","extensionToMimeType","aac","wav","mp3","ogg","png","jpg","jpeg","webp","ttf","otf","mp4","webm","xml","gz","js","readLocalFileToFile","extensionWithoutLeadingDot","File","moveAllLocalResourcesToCloudResources","oldFileMetadata","newCloudProjectId","allResourcesToUpload","alreadyDoneCount","checkIfIsGDevelopCloudBucketUrl","Boolean","getResourcesToUpload","_transformItem","resourceAbsolutePath","resourceAndFilesChunk","reduce","_processChunk","resourceAndFilesToUpload","uploadedProjectResourceFiles","getCredentialsForCloudProject","uploadProjectResourceFiles","movers","_movers","LocalFileStorageProvider","_2","ProjectResourcesCopier","copyAllResourcesTo","CloudStorageProvider","UrlStorageProvider","moveUrlResourcesToCloudProject","LocalResourceMover","moveAllProjectResources","_moveAllProjectResources","oldStorageProvider","newStorageProvider","mover","fetchers","_fetchers","moveUrlResourcesToCloudFilesIfPrivate","fetchRelativeResourcesToFullUrls","LocalResourceFetcher","fetchAllProjectResources","_fetchAllProjectResources","storageProvider","fetcher","LocalLoginProvider","auth","_loginWithEmailAndPassword","email","password","signInWithEmailAndPassword","_loginOrSignupWithProvider","provider","signal","promise","aborted","UserCancellationError","addEventListener","terminateWebSocket","setupAuthenticationWebSocket","onConnectionEstablished","connectionId","openExternalURL","onTokenReceived","_onTokenReceived","credential","GoogleAuthProvider","GithubAuthProvider","accessToken","OAuthProvider","idToken","id_token","nonce","raw_nonce","signInWithCredential","onError","onTimeout","create","authentication","setUpContextMenu","loginProvider","setLoginProvider","getArguments","Providers","disableCheckForUpdates","makeEventsFunctionCodeWriter","eventsFunctionsExtensionWriter","eventsFunctionsExtensionOpener","ProjectStorageProviders","storageProviders","defaultStorageProvider","getStorageProviderOperations","getStorageProviderResourceOperations","initialFileMetadataToOpen","MainFrame","renderMainMenu","ElectronMainMenu","renderPreviewLauncher","renderShareDialog","ShareDialog","isSavingProject","automatedExporters","manualExporters","initialTab","renderGDJSDevelopmentWatcher","resourceMover","resourceFetcher","resourceSources","resourceExternalEditors","localResourceExternalEditors","extensionsLoader","makeExtensionsLoader","ObjectsEditorService","ObjectsRenderingService","baseCreate","baseLodash","LazyWrapper","__wrapped__","__actions__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","prototype","constructor","LodashWrapper","chainAll","__chain__","__index__","__values__","identity","metaMap","baseSetData","func","nativeMax","max","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","holdersIndex","rightIndex","rightLength","offset","placeholder","createCtor","bitmask","thisArg","isBind","Ctor","wrapper","isObject","thisBinding","createHybrid","createRecurry","getHolder","replaceHolders","arity","composeArgs","composeArgsRight","countHolders","reorder","partialsRight","holdersRight","argPos","ary","isAry","isBindKey","isFlip","holdersCount","newHolders","reverse","isLaziable","setData","setWrapToString","wrapFunc","isCurry","newData","createBind","createCurry","createPartial","getData","mergeData","toInteger","TypeError","noop","realNames","hasOwnProperty","otherFunc","reWrapDetails","reSplitDetails","reWrapComment","details","lastIndex","getFuncName","lodash","funcName","other","PLACEHOLDER","WRAP_ARY_FLAG","nativeMin","min","srcBitmask","newBitmask","isCommon","isCombo","WeakMap","copyArray","isIndex","indexes","arrLength","oldArray","resIndex","shortOut","getWrapDetails","insertWrapDetails","setToString","updateWrapDetails","arrayEach","arrayIncludes","wrapFlags","pair","sort","clone","baseRest","createWrap","partial","castFunction","isObjectLike","wrapperClone"],"sourceRoot":""}